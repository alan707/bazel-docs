---
title: 'apple_common'
---

# apple_common

{% dynamic setvar source_file "src/main/java/com/google/devtools/build/lib/starlarkbuildapi/objc/AppleCommonApi.java" %}
{% include "\_buttons.html" %}
Functions for Starlark to access internals of the apple rule implementations.

## Members

- [apple_host_system_env](#apple_host_system_env)
- [apple_toolchain](#apple_toolchain)
- [dotted_version](#dotted_version)
- [platform](#platform)
- [platform_type](#platform_type)
- [target_apple_env](#target_apple_env)
- [XcodeProperties](#XcodeProperties)
- [XcodeVersionConfig](#XcodeVersionConfig)

## apple_host_system_env

``` rule-signature
dict apple_common.apple_host_system_env(xcode_config)
```

Returns a [dict](../core/dict.html) of environment variables that should be set for actions that need to run build tools on an Apple host system, such as the version of Xcode that should be used. The keys are variable names and the values are their corresponding values.

### Parameters

<table class="table table-bordered table-condensed table-params">
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td id="apple_host_system_env.xcode_config"><code>xcode_config</code></td>
<td>required<br />
A provider containing information about the Xcode configuration.</td>
</tr>
</tbody>
</table>

## apple_toolchain

``` rule-signature
unknown apple_common.apple_toolchain()
```

Utilities for resolving items from the apple toolchain.

## dotted_version

``` rule-signature
DottedVersion apple_common.dotted_version(version)
```

Creates a new [DottedVersion](../builtins/DottedVersion.html) instance.

### Parameters

<table class="table table-bordered table-condensed table-params">
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td id="dotted_version.version"><code>version</code></td>
<td><a href="../core/string.html" class="anchor">string</a>;
required<br />
The string representation of the DottedVersion.</td>
</tr>
</tbody>
</table>

## platform

``` rule-signature
struct apple_common.platform
```

An enum-like struct that contains the following fields corresponding to Apple platforms:  

- `ios_device`
- `ios_simulator`
- `macos`
- `tvos_device`
- `tvos_simulator`
- `visionos_device`
- `visionos_simulator`
- `watchos_device`
- `watchos_simulator`

These values can be passed to methods that expect a platform, like [XcodeVersionConfig.sdk_version_for_platform](../providers/XcodeVersionConfig.html#sdk_version_for_platform).

## platform_type

``` rule-signature
struct apple_common.platform_type
```

An enum-like struct that contains the following fields corresponding to Apple platform types:  

- `ios`
- `macos`
- `tvos`
- `visionos`
- `watchos`

These values can be passed to methods that expect a platform type, like the 'apple' configuration fragment's [multi_arch_platform](../fragments/apple.html#multi_arch_platform) method.

Example:

``` python

ctx.fragments.apple.multi_arch_platform(apple_common.platform_type.ios)
```

## target_apple_env

``` rule-signature
dict apple_common.target_apple_env(xcode_config, platform)
```

Returns a `dict` of environment variables that should be set for actions that build targets of the given Apple platform type. For example, this dictionary contains variables that denote the platform name and SDK version with which to build. The keys are variable names and the values are their corresponding values.

### Parameters

<table class="table table-bordered table-condensed table-params">
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td id="target_apple_env.xcode_config"><code>xcode_config</code></td>
<td>required<br />
A provider containing information about the Xcode configuration.</td>
</tr>
<tr>
<td id="target_apple_env.platform"><code>platform</code></td>
<td>required<br />
The apple platform.</td>
</tr>
</tbody>
</table>

## XcodeProperties

``` rule-signature
Provider apple_common.XcodeProperties
```

The constructor/key for the `XcodeVersionProperties` provider.

If a target propagates the `XcodeVersionProperties` provider, use this as the key with which to retrieve it. Example:  

``` python

dep = ctx.attr.deps[0]
p = dep[apple_common.XcodeVersionProperties]
```

## XcodeVersionConfig

``` rule-signature
Provider apple_common.XcodeVersionConfig
```

The constructor/key for the `XcodeVersionConfig` provider.
