---
title: 'TemplateDict'
---

# TemplateDict

{% dynamic setvar source_file "src/main/java/com/google/devtools/build/lib/starlarkbuildapi/TemplateDictApi.java" %}
{% include "\_buttons.html" %}
An Args-like structure for use in ctx.actions.expand_template(), which allows for deferring evaluation of values till the execution phase.

## Members

- [add](#add)
- [add_joined](#add_joined)

## add

``` rule-signature
TemplateDict TemplateDict.add(key, value)
```

Add a String value

### Parameters

<table class="table table-bordered table-condensed table-params">
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td id="add.key"><code>key</code></td>
<td><a href="../core/string.html" class="anchor">string</a>;
required<br />
A String key</td>
</tr>
<tr>
<td id="add.value"><code>value</code></td>
<td><a href="../core/string.html" class="anchor">string</a>;
required<br />
A String value</td>
</tr>
</tbody>
</table>

## add_joined

``` rule-signature
TemplateDict TemplateDict.add_joined(key, values, *, join_with, map_each, uniquify=False, format_joined=None, allow_closure=False)
```

Add depset of values

### Parameters

<table class="table table-bordered table-condensed table-params">
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td id="add_joined.key"><code>key</code></td>
<td><a href="../core/string.html" class="anchor">string</a>;
required<br />
A String key</td>
</tr>
<tr>
<td id="add_joined.values"><code>values</code></td>
<td><a href="../builtins/depset.html" class="anchor">depset</a>;
required<br />
The depset whose items will be joined.</td>
</tr>
<tr>
<td id="add_joined.join_with"><code>join_with</code></td>
<td><a href="../core/string.html" class="anchor">string</a>;
required<br />
A delimiter string used to join together the strings obtained from applying <code>map_each</code>, in the same manner as <a href="../core/string.html#join"><code>string.join()</code></a>.</td>
</tr>
<tr>
<td id="add_joined.map_each"><code>map_each</code></td>
<td>callable;
required<br />
A Starlark function accepting a single argument and returning either a string, <code>None</code>, or a list of strings. This function is applied to each item of the depset specified in the <code>values</code> parameter</td>
</tr>
<tr>
<td id="add_joined.uniquify"><code>uniquify</code></td>
<td><a href="../core/bool.html" class="anchor">bool</a>;
default is <code>False</code><br />
If true, duplicate strings derived from <code>values</code> will be omitted. Only the first occurrence of each string will remain. Usually this feature is not needed because depsets already omit duplicates, but it can be useful if <code>map_each</code> emits the same string for multiple items.</td>
</tr>
<tr>
<td id="add_joined.format_joined"><code>format_joined</code></td>
<td><a href="../core/string.html" class="anchor">string</a>; or <code>None</code>;
default is <code>None</code><br />
An optional format string pattern applied to the joined string. The format string must have exactly one '%s' placeholder.</td>
</tr>
<tr>
<td id="add_joined.allow_closure"><code>allow_closure</code></td>
<td><a href="../core/bool.html" class="anchor">bool</a>;
default is <code>False</code><br />
If true, allows the use of closures in function parameters like <code>map_each</code>. Usually this isn't necessary and it risks retaining large analysis-phase data structures into the execution phase.</td>
</tr>
</tbody>
</table>
