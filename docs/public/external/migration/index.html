<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Bzlmod Migration Guide | Bazel Documentation</title>
<meta name="description" content="keywords: bzlmod
{# disableFinding(LINE_OVER_80_LINK) #}
Due to the shortcomings of WORKSPACE, Bzlmod is replacing the legacy WORKSPACE system. The WORKSPACE file is already disabled in Bazel 8 (late 2024) and will be removed in Bazel 9 (late 2025). This guide helps you migrate your project to Bzlmod and drop WORKSPACE for managing external dependencies.
Why migrate to Bzlmod? There are many advantages compared to the legacy WORKSPACE system, which helps to ensure a healthy growth of the Bazel ecosystem.">
<meta property="og:url" content="http://localhost:1313/external/migration/">
  <meta property="og:site_name" content="Bazel Documentation">
  <meta property="og:title" content="Bzlmod Migration Guide">
  <meta property="og:description" content="keywords: bzlmod
{# disableFinding(LINE_OVER_80_LINK) #}
Due to the shortcomings of WORKSPACE, Bzlmod is replacing the legacy WORKSPACE system. The WORKSPACE file is already disabled in Bazel 8 (late 2024) and will be removed in Bazel 9 (late 2025). This guide helps you migrate your project to Bzlmod and drop WORKSPACE for managing external dependencies.
Why migrate to Bzlmod? There are many advantages compared to the legacy WORKSPACE system, which helps to ensure a healthy growth of the Bazel ecosystem.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="external">
    <meta property="article:published_time" content="2024-01-01T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-01-01T00:00:00+00:00">

  <meta itemprop="name" content="Bzlmod Migration Guide">
  <meta itemprop="description" content="keywords: bzlmod
{# disableFinding(LINE_OVER_80_LINK) #}
Due to the shortcomings of WORKSPACE, Bzlmod is replacing the legacy WORKSPACE system. The WORKSPACE file is already disabled in Bazel 8 (late 2024) and will be removed in Bazel 9 (late 2025). This guide helps you migrate your project to Bzlmod and drop WORKSPACE for managing external dependencies.
Why migrate to Bzlmod? There are many advantages compared to the legacy WORKSPACE system, which helps to ensure a healthy growth of the Bazel ecosystem.">
  <meta itemprop="datePublished" content="2024-01-01T00:00:00+00:00">
  <meta itemprop="dateModified" content="2024-01-01T00:00:00+00:00">
  <meta itemprop="wordCount" content="4091">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Bzlmod Migration Guide">
  <meta name="twitter:description" content="keywords: bzlmod
{# disableFinding(LINE_OVER_80_LINK) #}
Due to the shortcomings of WORKSPACE, Bzlmod is replacing the legacy WORKSPACE system. The WORKSPACE file is already disabled in Bazel 8 (late 2024) and will be removed in Bazel 9 (late 2025). This guide helps you migrate your project to Bzlmod and drop WORKSPACE for managing external dependencies.
Why migrate to Bzlmod? There are many advantages compared to the legacy WORKSPACE system, which helps to ensure a healthy growth of the Bazel ecosystem.">
<link href="/scss/main.css" rel="stylesheet">
<script
  src="https://code.jquery.com/jquery-3.7.1.min.js"
  integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
  crossorigin="anonymous"></script>

  </head>
  <body class="td-page">
    <header>
      <nav class="td-navbar js-navbar-scroll" data-bs-theme="dark">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class="navbar-brand__name">Bazel Documentation</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="/docs/"><span>Documentation</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/community/"><span>Community</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/about/"><span>About</span></a>
      </li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            <div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
    
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type="button" data-bs-toggle="collapse" data-bs-target="#td-section-nav" aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="td-sidebar-nav collapse" id="td-section-nav">
    <ul class="td-sidebar-nav__section pe-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m--li">
  <a href="/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-"><span class="">Bazel Documentation</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-help-li">
  <a href="/help/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-help"><span class="">Getting Help</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-concepts-li">
  <a href="/concepts/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-concepts"><span class="">Understanding Bazel</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-conceptsbuild-files-li">
  <a href="/concepts/build-files/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-conceptsbuild-files"><span class="">BUILD files</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-conceptsdependencies-li">
  <a href="/concepts/dependencies/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-conceptsdependencies"><span class="">Dependencies</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-conceptslabels-li">
  <a href="/concepts/labels/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-conceptslabels"><span class="">Labels</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-conceptsplatforms-li">
  <a href="/concepts/platforms/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-conceptsplatforms"><span class="">Migrating to Platforms</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-conceptsbuild-ref-li">
  <a href="/concepts/build-ref/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-conceptsbuild-ref"><span class="">Repositories, workspaces, packages, and targets</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-conceptsvisibility-li">
  <a href="/concepts/visibility/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-conceptsvisibility"><span class="">Visibility</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-basics-li">
  <a href="/basics/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-basics"><span class="">Basics</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-basicsartifact-based-builds-li">
  <a href="/basics/artifact-based-builds/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-basicsartifact-based-builds"><span class="">Artifact-Based Build Systems</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-basicsdependencies-li">
  <a href="/basics/dependencies/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-basicsdependencies"><span class="">Dependency Management</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-basicsdistributed-builds-li">
  <a href="/basics/distributed-builds/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-basicsdistributed-builds"><span class="">Distributed Builds</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-basicshermeticity-li">
  <a href="/basics/hermeticity/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-basicshermeticity"><span class="">Hermeticity</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-basicstask-based-builds-li">
  <a href="/basics/task-based-builds/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-basicstask-based-builds"><span class="">Task-Based Build Systems</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-basicsbuild-systems-li">
  <a href="/basics/build-systems/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-basicsbuild-systems"><span class="">Why a Build System?</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-tutorials-li">
  <a href="/tutorials/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-tutorials"><span class="">Tutorials</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-tutorialsccp-toolchain-config-li">
  <a href="/tutorials/ccp-toolchain-config/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-tutorialsccp-toolchain-config"><span class="">Bazel Tutorial: Configure C&#43;&#43; Toolchains</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-tutorialscpp-use-cases-li">
  <a href="/tutorials/cpp-use-cases/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-tutorialscpp-use-cases"><span class="">Common C&#43;&#43; Build Use Cases</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-tutorialscpp-dependency-li">
  <a href="/tutorials/cpp-dependency/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-tutorialscpp-dependency"><span class="">Review the dependency graph</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-tutorialscpp-labels-li">
  <a href="/tutorials/cpp-labels/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-tutorialscpp-labels"><span class="">Use labels to reference targets</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-configure-li">
  <a href="/configure/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-configure"><span class="">Configure</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-configurebest-practices-li">
  <a href="/configure/best-practices/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-configurebest-practices"><span class="">Best Practices</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-configurecoverage-li">
  <a href="/configure/coverage/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-configurecoverage"><span class="">Code coverage with Bazel</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-configureattributes-li">
  <a href="/configure/attributes/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-configureattributes"><span class="">Configurable Build Attributes</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-configureintegrate-cpp-li">
  <a href="/configure/integrate-cpp/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-configureintegrate-cpp"><span class="">Integrating with C&#43;&#43; Rules</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-configurewindows-li">
  <a href="/configure/windows/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-configurewindows"><span class="">Using Bazel on Windows</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-extending-li">
  <a href="/extending/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-extending"><span class="">Extending Bazel</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-extendingaspects-li">
  <a href="/extending/aspects/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-extendingaspects"><span class="">Aspects</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-extendingauto-exec-groups-li">
  <a href="/extending/auto-exec-groups/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-extendingauto-exec-groups"><span class="">Automatic Execution Groups (AEGs)</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-extendingconfig-li">
  <a href="/extending/config/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-extendingconfig"><span class="">Configurations</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-extendingdepsets-li">
  <a href="/extending/depsets/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-extendingdepsets"><span class="">Depsets</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-extendingexec-groups-li">
  <a href="/extending/exec-groups/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-extendingexec-groups"><span class="">Execution Groups</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-extendingconcepts-li">
  <a href="/extending/concepts/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-extendingconcepts"><span class="">Extension Overview</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-extendinglegacy-macros-li">
  <a href="/extending/legacy-macros/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-extendinglegacy-macros"><span class="">Legacy Macros</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-extendingmacros-li">
  <a href="/extending/macros/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-extendingmacros"><span class="">Macros</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-extendingplatforms-li">
  <a href="/extending/platforms/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-extendingplatforms"><span class="">Platforms</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-extendingrules-li">
  <a href="/extending/rules/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-extendingrules"><span class="">Rules</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-extendingtoolchains-li">
  <a href="/extending/toolchains/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-extendingtoolchains"><span class="">Toolchains</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-external-li">
  <a href="/external/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-external"><span class="">External</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-externalmod-command-li">
  <a href="/external/mod-command/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-externalmod-command"><span class="">`mod` Command</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-externallockfile-li">
  <a href="/external/lockfile/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-externallockfile"><span class="">Bazel Lockfile</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-externalmodule-li">
  <a href="/external/module/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-externalmodule"><span class="">Bazel modules</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-externalregistry-li">
  <a href="/external/registry/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-externalregistry"><span class="">Bazel registries</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-externalmigration-li">
  <a href="/external/migration/" class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id="m-externalmigration"><span class="td-sidebar-nav-active-item">Bzlmod Migration Guide</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-externaloverview-li">
  <a href="/external/overview/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-externaloverview"><span class="">External dependencies overview</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-externalfaq-li">
  <a href="/external/faq/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-externalfaq"><span class="">Frequently asked questions</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-externalextension-li">
  <a href="/external/extension/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-externalextension"><span class="">Module extensions</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-externalrepo-li">
  <a href="/external/repo/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-externalrepo"><span class="">Repository Rules</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-externalvendor-li">
  <a href="/external/vendor/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-externalvendor"><span class="">Vendor Mode</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-externalimages-li">
  <a href="/external/images/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-externalimages"><span class="">Images</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-remote-li">
  <a href="/remote/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-remote"><span class="">Remote</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-remoterules-li">
  <a href="/remote/rules/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-remoterules"><span class="">Adapting Bazel Rules for Remote Execution</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-remotebep-li">
  <a href="/remote/bep/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-remotebep"><span class="">Build Event Protocol</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-remotebep-examples-li">
  <a href="/remote/bep-examples/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-remotebep-examples"><span class="">Build Event Protocol Examples</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-remotebep-glossary-li">
  <a href="/remote/bep-glossary/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-remotebep-glossary"><span class="">Build Event Protocol Glossary</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-remoteci-li">
  <a href="/remote/ci/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-remoteci"><span class="">Configuring Bazel CI to Test Rules for Remote Execution</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-remotecreating-li">
  <a href="/remote/creating/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-remotecreating"><span class="">Creating Persistent Workers</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-remotecache-local-li">
  <a href="/remote/cache-local/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-remotecache-local"><span class="">Debugging Remote Cache Hits for Local Execution</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-remotecache-remote-li">
  <a href="/remote/cache-remote/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-remotecache-remote"><span class="">Debugging Remote Cache Hits for Remote Execution</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-remotedynamic-li">
  <a href="/remote/dynamic/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-remotedynamic"><span class="">Dynamic Execution</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-remoteworkspace-li">
  <a href="/remote/workspace/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-remoteworkspace"><span class="">Finding Non-Hermetic Behavior in WORKSPACE Rules</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-remotemultiplex-li">
  <a href="/remote/multiplex/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-remotemultiplex"><span class="">Multiplex Workers (Experimental Feature)</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-remoteoutput-directories-li">
  <a href="/remote/output-directories/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-remoteoutput-directories"><span class="">Output Directory Layout</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-remotepersistent-li">
  <a href="/remote/persistent/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-remotepersistent"><span class="">Persistent Workers</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-remotecaching-li">
  <a href="/remote/caching/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-remotecaching"><span class="">Remote Caching</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-remoterbe-li">
  <a href="/remote/rbe/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-remoterbe"><span class="">Remote Execution Overview</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-remotesandbox-li">
  <a href="/remote/sandbox/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-remotesandbox"><span class="">Troubleshooting Bazel Remote Execution with Docker Sandbox</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-query-li">
  <a href="/query/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-query"><span class="">Query</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-queryaquery-li">
  <a href="/query/aquery/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-queryaquery"><span class="">Action Graph Query (aquery)</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-querycquery-li">
  <a href="/query/cquery/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-querycquery"><span class="">Configurable Query (cquery)</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-queryguide-li">
  <a href="/query/guide/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-queryguide"><span class="">Query guide</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-queryquickstart-li">
  <a href="/query/quickstart/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-queryquickstart"><span class="">Query quickstart</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-querylanguage-li">
  <a href="/query/language/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-querylanguage"><span class="">The Bazel Query Reference</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-queryimages-li">
  <a href="/query/images/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-queryimages"><span class="">Images</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-advanced-li">
  <a href="/advanced/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-advanced"><span class="">Advanced</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-advancedperformance-li">
  <a href="/advanced/performance/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-advancedperformance"><span class="">Performance</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-advancedperformancebuild-performance-breakdown-li">
  <a href="/advanced/performance/build-performance-breakdown/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-advancedperformancebuild-performance-breakdown"><span class="">Breaking down build performance</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-advancedperformancebuild-performance-metrics-li">
  <a href="/advanced/performance/build-performance-metrics/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-advancedperformancebuild-performance-metrics"><span class="">Extracting build performance metrics</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-advancedperformancejson-trace-profile-li">
  <a href="/advanced/performance/json-trace-profile/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-advancedperformancejson-trace-profile"><span class="">JSON Trace Profile</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-advancedperformanceiteration-speed-li">
  <a href="/advanced/performance/iteration-speed/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-advancedperformanceiteration-speed"><span class="">Optimize Iteration Speed</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-advancedperformancememory-li">
  <a href="/advanced/performance/memory/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-advancedperformancememory"><span class="">Optimize Memory</span></a>
</li>
  </ul>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-install-li">
  <a href="/install/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-install"><span class="">Install</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-installcompletion-li">
  <a href="/install/completion/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-installcompletion"><span class="">Command-Line Completion</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-installcompile-source-li">
  <a href="/install/compile-source/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-installcompile-source"><span class="">Compiling Bazel from Source</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-installdocker-container-li">
  <a href="/install/docker-container/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-installdocker-container"><span class="">Getting Started with Bazel Docker Container</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-installbazelisk-li">
  <a href="/install/bazelisk/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-installbazelisk"><span class="">Installing / Updating Bazel using Bazelisk</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-installos-x-li">
  <a href="/install/os-x/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-installos-x"><span class="">Installing Bazel on macOS</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-installsuse-li">
  <a href="/install/suse/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-installsuse"><span class="">Installing Bazel on openSUSE Tumbleweed &amp; Leap</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-installubuntu-li">
  <a href="/install/ubuntu/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-installubuntu"><span class="">Installing Bazel on Ubuntu</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-installwindows-li">
  <a href="/install/windows/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-installwindows"><span class="">Installing Bazel on Windows</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-installide-li">
  <a href="/install/ide/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-installide"><span class="">Integrating Bazel with IDEs</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-installimages-li">
  <a href="/install/images/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-installimages"><span class="">Images</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-migrate-li">
  <a href="/migrate/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-migrate"><span class="">Migrate</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-migratemaven-li">
  <a href="/migrate/maven/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-migratemaven"><span class="">Migrating from Maven to Bazel</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-migratexcode-li">
  <a href="/migrate/xcode/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-migratexcode"><span class="">Migrating from Xcode to Bazel</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-reference-li">
  <a href="/reference/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-reference"><span class="">Reference</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-referenceflag-cheatsheet-li">
  <a href="/reference/flag-cheatsheet/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-referenceflag-cheatsheet"><span class="">Bazel flag cheat sheet</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-referenceglossary-li">
  <a href="/reference/glossary/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-referenceglossary"><span class="">Bazel Glossary</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-referenceskyframe-li">
  <a href="/reference/skyframe/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-referenceskyframe"><span class="">Skyframe</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-referencetest-encyclopedia-li">
  <a href="/reference/test-encyclopedia/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-referencetest-encyclopedia"><span class="">Test encyclopedia</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-release-li">
  <a href="/release/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-release"><span class="">Release</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-releasebackward-compatibility-li">
  <a href="/release/backward-compatibility/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-releasebackward-compatibility"><span class="">Backward Compatibility</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-releaserolling-li">
  <a href="/release/rolling/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-releaserolling"><span class="">Rolling Releases</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-releaserule-compatibility-li">
  <a href="/release/rule-compatibility/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-releaserule-compatibility"><span class="">Rule Compatibility</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-rules-li">
  <a href="/rules/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-rules"><span class="">Rules</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-rulesbzl-style-li">
  <a href="/rules/bzl-style/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-rulesbzl-style"><span class="">.bzl style guide</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-ruleschallenges-li">
  <a href="/rules/challenges/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-ruleschallenges"><span class="">Challenges of Writing Rules</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-ruleslegacy-macro-tutorial-li">
  <a href="/rules/legacy-macro-tutorial/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-ruleslegacy-macro-tutorial"><span class="">Creating a Legacy Macro</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-rulesmacro-tutorial-li">
  <a href="/rules/macro-tutorial/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-rulesmacro-tutorial"><span class="">Creating a Symbolic Macro</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-rulesdeploying-li">
  <a href="/rules/deploying/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-rulesdeploying"><span class="">Deploying Rules</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-ruleserrors-li">
  <a href="/rules/errors/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-ruleserrors"><span class="">Errors</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-ruleserrorsread-only-variable-li">
  <a href="/rules/errors/read-only-variable/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-ruleserrorsread-only-variable"><span class="">Error: Variable x is read only</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-rulesfaq-li">
  <a href="/rules/faq/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-rulesfaq"><span class="">Frequently Asked Questions</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-rulesperformance-li">
  <a href="/rules/performance/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-rulesperformance"><span class="">Optimizing Performance</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-rulesrules-tutorial-li">
  <a href="/rules/rules-tutorial/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-rulesrules-tutorial"><span class="">Rules Tutorial</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-ruleslanguage-li">
  <a href="/rules/language/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-ruleslanguage"><span class="">Starlark Language</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-rulestesting-li">
  <a href="/rules/testing/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-rulestesting"><span class="">Testing</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-rulesverbs-tutorial-li">
  <a href="/rules/verbs-tutorial/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-rulesverbs-tutorial"><span class="">Using Macros to Create Custom Verbs</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-ruleswindows-li">
  <a href="/rules/windows/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-ruleswindows"><span class="">Writing Rules on Windows</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-run-li">
  <a href="/run/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-run"><span class="">Run</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-runbuild-li">
  <a href="/run/build/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-runbuild"><span class="">Build programs with Bazel</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-runscripts-li">
  <a href="/run/scripts/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-runscripts"><span class="">Calling Bazel from scripts</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-runclient-server-li">
  <a href="/run/client-server/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-runclient-server"><span class="">Client/server implementation</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-runbazelrc-li">
  <a href="/run/bazelrc/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-runbazelrc"><span class="">Write bazelrc configuration files</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-start-li">
  <a href="/start/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-start"><span class="">Start</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-startcpp-li">
  <a href="/start/cpp/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-startcpp"><span class="">Bazel Tutorial: Build a C&#43;&#43; Project</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-startgo-li">
  <a href="/start/go/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-startgo"><span class="">Bazel Tutorial: Build a Go Project</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-startjava-li">
  <a href="/start/java/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-startjava"><span class="">Bazel Tutorial: Build a Java Project</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-startandroid-app-li">
  <a href="/start/android-app/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-startandroid-app"><span class="">Bazel Tutorial: Build an Android App</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-startios-app-li">
  <a href="/start/ios-app/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-startios-app"><span class="">Bazel Tutorial: Build an iOS App</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docs-li">
  <a href="/docs/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-docs"><span class="">Using Bazel</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbazel-and-android-li">
  <a href="/docs/bazel-and-android/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsbazel-and-android"><span class="">Android and Bazel</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsandroid-build-performance-li">
  <a href="/docs/android-build-performance/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsandroid-build-performance"><span class="">Android Build Performance</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsandroid-instrumentation-test-li">
  <a href="/docs/android-instrumentation-test/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsandroid-instrumentation-test"><span class="">Android Instrumentation Tests</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbazel-and-apple-li">
  <a href="/docs/bazel-and-apple/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsbazel-and-apple"><span class="">Apple Apps and Bazel</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsmobile-install-li">
  <a href="/docs/mobile-install/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsmobile-install"><span class="">bazel mobile-install</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbazel-and-cpp-li">
  <a href="/docs/bazel-and-cpp/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsbazel-and-cpp"><span class="">C&#43;&#43; and Bazel</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docscc-toolchain-config-reference-li">
  <a href="/docs/cc-toolchain-config-reference/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docscc-toolchain-config-reference"><span class="">C&#43;&#43; Toolchain Configuration</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsuser-manual-li">
  <a href="/docs/user-manual/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsuser-manual"><span class="">Commands and Options</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconfigurable-attributes-li">
  <a href="/docs/configurable-attributes/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsconfigurable-attributes"><span class="">Configurable Build Attributes</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbazel-and-java-li">
  <a href="/docs/bazel-and-java/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsbazel-and-java"><span class="">Java and Bazel</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbazel-and-javascript-li">
  <a href="/docs/bazel-and-javascript/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsbazel-and-javascript"><span class="">JavaScript and Bazel</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docssandboxing-li">
  <a href="/docs/sandboxing/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docssandboxing"><span class="">Sandboxing</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsandroid-ndk-li">
  <a href="/docs/android-ndk/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsandroid-ndk"><span class="">Using the Android Native Development Kit with Bazel</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsimages-li">
  <a href="/docs/images/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-docsimages"><span class="">Images</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-brand-li">
  <a href="/brand/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-brand"><span class="">Brand</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-images-li">
  <a href="/images/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-images"><span class="">Images</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-versions-li">
  <a href="/versions/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-versions"><span class="">Versions</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-community-li">
  <a href="/community/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-community"><span class="">Community &amp; Product Partners</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-communityroadmaps-configurability-li">
  <a href="/community/roadmaps-configurability/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-communityroadmaps-configurability"><span class="">Bazel Configurability 2021 Roadmap</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-communitysig-li">
  <a href="/community/sig/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-communitysig"><span class="">Bazel Special Interest Groups</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-communityupdate-li">
  <a href="/community/update/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-communityupdate"><span class="">Community updates</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-communityrecommended-rules-li">
  <a href="/community/recommended-rules/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-communityrecommended-rules"><span class="">Recommended Rules</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-communityremote-execution-services-li">
  <a href="/community/remote-execution-services/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-communityremote-execution-services"><span class="">Remote Execution Services</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-communityroadmaps-starlark-li">
  <a href="/community/roadmaps-starlark/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-communityroadmaps-starlark"><span class="">Starlark Roadmap</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-communityusers-li">
  <a href="/community/users/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-communityusers"><span class="">Who&#39;s Using Bazel</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-communityexperts-li">
  <a href="/community/experts/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-communityexperts"><span class="">Experts</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-communityimages-li">
  <a href="/community/images/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-communityimages"><span class="">Images</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-communitypartners-li">
  <a href="/community/partners/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-communitypartners"><span class="">Partners</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-contribute-li">
  <a href="/contribute/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-contribute"><span class="">Contribute</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-contributestatemachine-guide-li">
  <a href="/contribute/statemachine-guide/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-contributestatemachine-guide"><span class="">A Guide to Skyframe `StateMachine`s</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-contributedocs-style-guide-li">
  <a href="/contribute/docs-style-guide/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-contributedocs-style-guide"><span class="">Bazel docs style guide</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-contributedocs-li">
  <a href="/contribute/docs/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-contributedocs"><span class="">Contribute to Bazel documentation</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-contributepolicy-li">
  <a href="/contribute/policy/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-contributepolicy"><span class="">Contribution policy</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-contributedesign-documents-li">
  <a href="/contribute/design-documents/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-contributedesign-documents"><span class="">Design Documents</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-contributemaintainers-guide-li">
  <a href="/contribute/maintainers-guide/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-contributemaintainers-guide"><span class="">Guide for Bazel Maintainers</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-contributebreaking-changes-li">
  <a href="/contribute/breaking-changes/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-contributebreaking-changes"><span class="">Guide for rolling out breaking changes</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-contributewindows-chocolatey-maintenance-li">
  <a href="/contribute/windows-chocolatey-maintenance/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-contributewindows-chocolatey-maintenance"><span class="">Maintaining Bazel Chocolatey package on Windows</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-contributewindows-scoop-maintenance-li">
  <a href="/contribute/windows-scoop-maintenance/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-contributewindows-scoop-maintenance"><span class="">Maintaining Bazel Scoop package on Windows</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-contributenaming-li">
  <a href="/contribute/naming/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-contributenaming"><span class="">Naming a Bazel related project</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-contributepatch-acceptance-li">
  <a href="/contribute/patch-acceptance/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-contributepatch-acceptance"><span class="">Patch Acceptance Process</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-contributesearch-li">
  <a href="/contribute/search/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-contributesearch"><span class="">Searching the codebase</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-contributecodebase-li">
  <a href="/contribute/codebase/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-contributecodebase"><span class="">The Bazel codebase</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-contributerelease-notes-li">
  <a href="/contribute/release-notes/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-contributerelease-notes"><span class="">Writing release notes</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-contributeimages-li">
  <a href="/contribute/images/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-contributeimages"><span class="">Images</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-about-li">
  <a href="/about/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-about"><span class="">About</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-aboutroadmap-li">
  <a href="/about/roadmap/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-aboutroadmap"><span class="">Bazel roadmap</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-aboutvision-li">
  <a href="/about/vision/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-aboutvision"><span class="">Bazel Vision</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-aboutfaq-li">
  <a href="/about/faq/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-aboutfaq"><span class="">FAQ</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-aboutintro-li">
  <a href="/about/intro/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-aboutintro"><span class="">Intro to Bazel</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-aboutwhy-li">
  <a href="/about/why/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-aboutwhy"><span class="">Why Bazel?</span></a>
</li>
  </ul>
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            <div class="td-page-meta ms-2 pb-1 pt-2 mb-0">
<a href="https://github.com/bazelbuild/bazel/tree/master/site/en/content/external/migration.md" class="td-page-meta--view td-page-meta__view" target="_blank" rel="noopener"><i class="fa-solid fa-file-lines fa-fw"></i> View page source</a>
  <a href="https://github.com/bazelbuild/bazel/edit/master/site/en/content/external/migration.md" class="td-page-meta--edit td-page-meta__edit" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
  <a href="https://github.com/bazelbuild/bazel/new/master/site/en/content/external?filename=change-me.md&amp;value=---%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0Aweight%3A&#43;100%0Adescription%3A&#43;%3E-%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0A---%0A%0A%23%23&#43;Heading%0A%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0A%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0A" class="td-page-meta--child td-page-meta__child" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Create child page</a>
  <a href="https://github.com/bazelbuild/bazel/issues/new?title=Bzlmod%20Migration%20Guide" class="td-page-meta--issue td-page-meta__issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> Create documentation issue</a>
  
</div>

            <div class="td-toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#why-migrate-to-bzlmod">Why migrate to Bzlmod?</a></li>
    <li><a href="#how-to-migrate-to-bzlmod">How to migrate to Bzlmod?</a></li>
    <li><a href="#migration-tool">Migration tool</a>
      <ul>
        <li><a href="#core-functionality">Core Functionality</a></li>
        <li><a href="#how-to-use-the-migration-tool">How to Use the Migration Tool</a></li>
      </ul>
    </li>
    <li><a href="#repositoriesbzl-in-foo">repositories.bzl in foo</a></li>
    <li><a href="#workspace">WORKSPACE</a></li>
  </ul>
</nav>
      </div>
    
            
	
          </aside>
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="/external/">External</a></li>
  <li class="breadcrumb-item active" aria-current="page">
    Bzlmod Migration Guide</li>
  </ol>
</nav>
<div class="td-content">
	<h1>Bzlmod Migration Guide</h1>
	
	<header class="article-meta">
		
  </header>
	<p>keywords: bzlmod</p>
<p>{# disableFinding(LINE_OVER_80_LINK) #}</p>
<p>Due to the <a href="/external/overview#workspace-shortcomings/">shortcomings of
WORKSPACE</a>, Bzlmod is replacing the
legacy WORKSPACE system. The WORKSPACE file is already disabled in Bazel 8 (late
2024) and will be removed in Bazel 9 (late 2025). This guide helps you migrate
your project to Bzlmod and drop WORKSPACE for managing external dependencies.</p>
<h2 id="why-migrate-to-bzlmod">Why migrate to Bzlmod?</h2>
<ul>
<li>
<p>There are many <a href="overview#benefits">advantages</a> compared to the legacy
WORKSPACE system, which helps to ensure a healthy growth of the Bazel
ecosystem.</p>
</li>
<li>
<p>If your project is a dependency of other projects, migrating to Bzlmod will
unblock their migration and make it easier for them to depend on your
project.</p>
</li>
<li>
<p>Migration to Bzlmod is a necessary step in order to use future Bazel
versions (mandatory in Bazel 9).</p>
</li>
</ul>
<h2 id="how-to-migrate-to-bzlmod">How to migrate to Bzlmod?</h2>
<p>Recommended migration process:</p>
<ol>
<li>Use <a href="#migration-tool">migration tool</a> as a helper tool to streamline the
migration process as much as possible. Check <a href="#migration-tool">migration
tool</a> and <a href="#migration-tool-how-to-use">how to use the tool</a>
sections.</li>
<li>If there are errors left after using the migration tool, resolve them
manually. For understanding the main differences between concepts inside
<code>WORKSPACE</code> and <code>MODULE.bazel</code> files, check <a href="#workspace-vs-bzlmod">WORKSPACE versus
Bzlmod</a> section.</li>
</ol>
<h2 id="migration-tool">Migration tool</h2>
<p>To simplify the often complex process of moving from WORKSPACE to Bzlmod, it&rsquo;s
highly recommended to use the <a href="https://github.com/bazelbuild/bazel-central-registry/blob/main/tools/migrate_to_bzlmod.py">migration script</a>. This helper
tool automates many of the steps involved in migrating your external dependency
management system.</p>
<h3 id="core-functionality">Core Functionality</h3>
<p>The script&rsquo;s primary functions are:</p>
<ul>
<li><strong>Dependency Information Collection:</strong> Analyzes your project&rsquo;s <code>WORKSPACE</code>
file to identify external repositories used by specified build targets. It
uses Bazel&rsquo;s
<a href="https://bazel.build/versions/8.2.0/reference/command-line-reference#flag--experimental_repository_resolved_file">experimental_repository_resolved_file</a>
flag to generate a <code>resolved_deps.py</code> file containing this information.</li>
<li><strong>Direct Dependency Identification:</strong> Uses <code>bazel query</code> to determine which
repositories are direct dependencies for the specified targets.</li>
<li><strong>Bzlmod Migration:</strong> Translates relevant <code>WORKSPACE</code> dependencies into
their Bzlmod equivalents. This is a two-step process:
<ol>
<li>Tries introducing all identified direct dependencies to the
<code>MODULE.bazel</code> file.</li>
<li>Attempts to build specified targets with Bzlmod enabled, then
iteratively identifies and fixes recognizable errors. This step is
needed since some dependencies might be missing in the first step.</li>
</ol>
</li>
<li><strong>Migration Report Generation:</strong> Creates a <code>migration_info.md</code> file that
documents the migration process. This report includes a list of direct
dependencies, the generated Bzlmod declarations, and any manual steps that
may be required to complete the migration.</li>
</ul>
<p>The migration tool supports:</p>
<ul>
<li>Dependencies available in the Bazel Central Registry</li>
<li>User-defined custom repository rules</li>
<li>[Upcoming] Package manager dependencies</li>
</ul>
<p><strong>Important Note</strong>: The migration tool is a best-effort utility. Always
double-check its recommendations for correctness.</p>
<h3 id="how-to-use-the-migration-tool">How to Use the Migration Tool</h3>
<p>Before you begin:</p>
<ul>
<li>
<p>Upgrade to the latest Bazel 7 release, which provides robust support for
both WORKSPACE and Bzlmod.</p>
</li>
<li>
<p>Verify the following command runs successfully for your project&rsquo;s main build
targets:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">bazel build --nobuild --enable_workspace --noenable_bzlmod &lt;targets&gt;
</span></span></code></pre></div></li>
</ul>
<p>Once the prerequisites are met, run the following commands to use the migration
tool:</p>

<div class="chem">$$# Clone the Bazel Central Registry repository
git clone https://github.com/bazelbuild/bazel-central-registry.git
cd bazel-central-registry

# Build the migration tool
bazel build //tools:migrate_to_bzlmod

# Create a convenient alias for the tool
alias migrate2bzlmod=$(realpath ./bazel-bin/tools/migrate_to_bzlmod)

# Navigate to your project's root directory and run the tool
cd <your workspace root>
migrate2bzlmod -t <your build targets>
```starlark
## WORKSPACE vs Bzlmod

Bazel's WORKSPACE and Bzlmod offer similar features with different syntax. This
section explains how to migrate from specific WORKSPACE functionalities to
Bzlmod.

### Define the root of a Bazel workspace

The WORKSPACE file marks the source root of a Bazel project, this responsibility
is replaced by MODULE.bazel in Bazel version 6.3 and later. With Bazel versions
prior to 6.3, there should still be a `WORKSPACE` or `WORKSPACE.bazel` file at
your workspace root, maybe with comments like:

*   **WORKSPACE**

    ```
    # This file marks the root of the Bazel workspace.
    # See MODULE.bazel for external dependencies setup.
    ```

### Enable Bzlmod in your bazelrc

`.bazelrc` lets you set flags that apply every time your run Bazel. To enable
Bzlmod, use the `--enable_bzlmod` flag, and apply it to the `common` command so
it applies to every command:

* **.bazelrc**

    ```
    # Enable Bzlmod for every Bazel command
    common --enable_bzlmod
    ```

### Specify repository name for your workspace

*   **WORKSPACE**

    The [`workspace`](/rules/lib/globals/workspace#workspace/) function is used
    to specify a repository name for your workspace. This allows a target
    `//foo:bar` in the workspace to be referenced as `@<workspace
    name>//foo:bar`. If not specified, the default repository name for your
    workspace is `__main__`.

    ```
    ## WORKSPACE
    workspace(name = "com_foo_bar")
    ```

*   **Bzlmod**

    It's recommended to reference targets in the same workspace with the
    `//foo:bar` syntax without `@<repo name>`. But if you do need the old syntax
    , you can use the module name specified by the
    [`module`](/rules/lib/globals/module#module/) function as the repository
    name. If the module name is different from the needed repository name, you
    can use `repo_name` attribute of the
    [`module`](/rules/lib/globals/module#module/) function to override the
    repository name.

    ```
    ## MODULE.bazel
    module(
        name = "bar",
        repo_name = "com_foo_bar",
    )
    ```

### Fetch external dependencies as Bazel modules

If your dependency is a Bazel project, you should be able to depend on it as a
Bazel module when it also adopts Bzlmod.

*   **WORKSPACE**

    With WORKSPACE, it's common to use the
    [`http_archive`](/rules/lib/repo/http#http_archive/) or
    [`git_repository`](/rules/lib/repo/git#git_repository/) repository rules to
    download the sources of the Bazel project.

    ```
    ## WORKSPACE
    load("@bazel_tools//tools/build_defs/repo:http.bzl", "http_archive")

    http_archive(
        name = "bazel_skylib",
        urls = ["https://github.com/bazelbuild/bazel-skylib/releases/download/1.4.2/bazel-skylib-1.4.2.tar.gz"],
        sha256 = "66ffd9315665bfaafc96b52278f57c7e2dd09f5ede279ea6d39b2be471e7e3aa",
    )
    load("@bazel_skylib//:workspace.bzl", "bazel_skylib_workspace")
    bazel_skylib_workspace()

    http_archive(
        name = "rules_java",
        urls = ["https://github.com/bazelbuild/rules_java/releases/download/6.1.1/rules_java-6.1.1.tar.gz"],
        sha256 = "76402a50ae6859d50bd7aed8c1b8ef09dae5c1035bb3ca7d276f7f3ce659818a",
    )
    load("@rules_java//java:repositories.bzl", "rules_java_dependencies", "rules_java_toolchains")
    rules_java_dependencies()
    rules_java_toolchains()
    ```

    As you can see, it's a common pattern that users need to load transitive
    dependencies from a macro of the dependency. Assume both `bazel_skylib` and
    `rules_java` depends on `platform`, the exact version of the `platform`
    dependency is determined by the order of the macros.

*   **Bzlmod**

    With Bzlmod, as long as your dependency is available in [Bazel Central
    Registry](https://registry.bazel.build) or your custom [Bazel
    registry](/external/registry/), you can simply depend on it with a
    [`bazel_dep`](/rules/lib/globals/module#bazel_dep/) directive.

    ```
    ## MODULE.bazel
    bazel_dep(name = "bazel_skylib", version = "1.4.2")
    bazel_dep(name = "rules_java", version = "6.1.1")
    ```

    Bzlmod resolves Bazel module dependencies transitively using the
    [MVS](https://research.swtch.com/vgo-mvs) algorithm. Therefore, the maximal
    required version of `platform` is selected automatically.

### Override a dependency as a Bazel module

As the root module, you can override Bazel module dependencies in different
ways.

Please read the [overrides](/external/module#overrides/) section for more
information.

You can find some example usages in the
[examples][override-examples]
repository.

[override-examples]: https://github.com/bazelbuild/examples/blob/main/bzlmod/02-override_bazel_module

### Fetch external dependencies with module extensions

If your dependency is not a Bazel project or not yet available in any Bazel
registry, you can introduce it using
[`use_repo_rule`](/external/module#use_repo_rule/) or [module
extensions](/external/extension/).

*   **WORKSPACE**

    Download a file using the [`http_file`](/rules/lib/repo/http#http_file/)
    repository rule.

    ```
    ## WORKSPACE
    load("@bazel_tools//tools/build_defs/repo:http.bzl", "http_file")

    http_file(
        name = "data_file",
        url = "http://example.com/file",
        sha256 = "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",
    )
    ```

*   **Bzlmod**

    With Bzlmod, you can use the `use_repo_rule` directive in your MODULE.bazel
    file to directly instantiate repos:

    ```
    ## MODULE.bazel
    http_file = use_repo_rule("@bazel_tools//tools/build_defs/repo:http.bzl", "http_file")
    http_file(
        name = "data_file",
        url = "http://example.com/file",
        sha256 = "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",
    )
    ```

    Under the hood, this is implemented using a module extension. If you need to
    perform more complex logic than simply invoking a repo rule, you could also
    implement a module extension yourself. You'll need to move the definition
    into a `.bzl` file, which also lets you share the definition between
    WORKSPACE and Bzlmod during the migration period.

    ```
    ## repositories.bzl
    load("@bazel_tools//tools/build_defs/repo:http.bzl", "http_file")
    def my_data_dependency():
        http_file(
            name = "data_file",
            url = "http://example.com/file",
            sha256 = "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",
        )
    ```

    Implement a module extension to load the dependencies macro. You can define
    it in the same `.bzl` file of the macro, but to keep compatibility with
    older Bazel versions, it's better to define it in a separate `.bzl` file.

    ```
    ## extensions.bzl
    load("//:repositories.bzl", "my_data_dependency")
    def _non_module_dependencies_impl(_ctx):
        my_data_dependency()

    non_module_dependencies = module_extension(
        implementation = _non_module_dependencies_impl,
    )
    ```

    To make the repository visible to the root project, you should declare the
    usages of the module extension and the repository in the MODULE.bazel file.

    ```
    ## MODULE.bazel
    non_module_dependencies = use_extension("//:extensions.bzl", "non_module_dependencies")
    use_repo(non_module_dependencies, "data_file")
    ```

### Resolve conflict external dependencies with module extension

A project can provide a macro that introduces external repositories based on
inputs from its callers. But what if there are multiple callers in the
dependency graph and they cause a conflict?

Assume the project `foo` provides the following macro which takes `version` as
an argument.$$</div><h2 id="repositoriesbzl-in-foo">repositories.bzl in foo</h2>
<p>load(&quot;@bazel_tools//tools/build_defs/repo:http.bzl&quot;, &ldquo;http_file&rdquo;)
def data_deps(version = &ldquo;1.0&rdquo;):
http_file(
name = &ldquo;data_file&rdquo;,
url = &ldquo;<a href="http://example.com/file-%25s%22">http://example.com/file-%s&quot;</a> % version,
# Omitting the &ldquo;sha256&rdquo; attribute for simplicity
)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="o">*</span>   <span class="o">**</span><span class="n">WORKSPACE</span><span class="o">**</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">With</span> <span class="n">WORKSPACE</span><span class="p">,</span> <span class="n">you</span> <span class="n">can</span> <span class="nb">load</span> <span class="n">the</span> <span class="n">macro</span> <span class="n">from</span> <span class="err">`@</span><span class="n">foo</span><span class="err">`</span> <span class="ow">and</span> <span class="n">specify</span> <span class="n">the</span> <span class="n">version</span>
</span></span><span class="line"><span class="cl">    <span class="n">of</span> <span class="n">the</span> <span class="n">data</span> <span class="n">dependency</span> <span class="n">you</span> <span class="n">need</span><span class="o">.</span> <span class="n">Assume</span> <span class="n">you</span> <span class="n">have</span> <span class="n">another</span> <span class="n">dependency</span> <span class="err">`@</span><span class="n">bar</span><span class="err">`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">which</span> <span class="n">also</span> <span class="n">depends</span> <span class="n">on</span> <span class="err">`@</span><span class="n">foo</span><span class="err">`</span> <span class="n">but</span> <span class="n">requires</span> <span class="n">a</span> <span class="n">different</span> <span class="n">version</span> <span class="n">of</span> <span class="n">the</span> <span class="n">data</span>
</span></span><span class="line"><span class="cl">    <span class="n">dependency</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="err">```</span>
</span></span><span class="line"><span class="cl">    <span class="c1">## WORKSPACE</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Introduce @foo and @bar.</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nb">load</span><span class="p">(</span><span class="s2">&#34;@foo//:repositories.bzl&#34;</span><span class="p">,</span> <span class="s2">&#34;data_deps&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">data_deps</span><span class="p">(</span><span class="n">version</span> <span class="o">=</span> <span class="s2">&#34;2.0&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nb">load</span><span class="p">(</span><span class="s2">&#34;@bar//:repositories.bzl&#34;</span><span class="p">,</span> <span class="s2">&#34;bar_deps&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">bar_deps</span><span class="p">()</span> <span class="c1"># -&gt; which calls data_deps(version = &#34;3.0&#34;)</span>
</span></span><span class="line"><span class="cl">    <span class="err">```</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">In</span> <span class="n">this</span> <span class="k">case</span><span class="p">,</span> <span class="n">the</span> <span class="n">end</span> <span class="n">user</span> <span class="n">must</span> <span class="n">carefully</span> <span class="n">adjust</span> <span class="n">the</span> <span class="n">order</span> <span class="n">of</span> <span class="n">macros</span> <span class="ow">in</span> <span class="n">the</span>
</span></span><span class="line"><span class="cl">    <span class="n">WORKSPACE</span> <span class="n">to</span> <span class="n">get</span> <span class="n">the</span> <span class="n">version</span> <span class="n">they</span> <span class="n">need</span><span class="o">.</span> <span class="n">This</span> <span class="n">is</span> <span class="n">one</span> <span class="n">of</span> <span class="n">the</span> <span class="n">biggest</span> <span class="n">pain</span>
</span></span><span class="line"><span class="cl">    <span class="n">points</span> <span class="n">with</span> <span class="n">WORKSPACE</span> <span class="n">since</span> <span class="n">it</span> <span class="n">doesn</span><span class="s1">&#39;t really provide a sensible way to</span>
</span></span><span class="line"><span class="cl">    <span class="n">resolve</span> <span class="n">dependencies</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">*</span>   <span class="o">**</span><span class="n">Bzlmod</span><span class="o">**</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">With</span> <span class="n">Bzlmod</span><span class="p">,</span> <span class="n">the</span> <span class="n">author</span> <span class="n">of</span> <span class="n">project</span> <span class="err">`</span><span class="n">foo</span><span class="err">`</span> <span class="n">can</span> <span class="n">use</span> <span class="n">module</span> <span class="n">extension</span> <span class="n">to</span> <span class="n">resolve</span>
</span></span><span class="line"><span class="cl">    <span class="n">conflicts</span><span class="o">.</span> <span class="n">For</span> <span class="n">example</span><span class="p">,</span> <span class="n">let</span><span class="s1">&#39;s assume it makes sense to always select the</span>
</span></span><span class="line"><span class="cl">    <span class="n">maximal</span> <span class="n">required</span> <span class="n">version</span> <span class="n">of</span> <span class="n">the</span> <span class="n">data</span> <span class="n">dependency</span> <span class="n">among</span> <span class="n">all</span> <span class="n">Bazel</span> <span class="n">modules</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="err">```</span>
</span></span><span class="line"><span class="cl">    <span class="c1">## extensions.bzl in foo</span>
</span></span><span class="line"><span class="cl">    <span class="nb">load</span><span class="p">(</span><span class="s2">&#34;//:repositories.bzl&#34;</span><span class="p">,</span> <span class="s2">&#34;data_deps&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">data</span> <span class="o">=</span> <span class="n">tag_class</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s2">&#34;version&#34;</span><span class="p">:</span> <span class="n">attr</span><span class="o">.</span><span class="n">string</span><span class="p">()})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">_data_deps_extension_impl</span><span class="p">(</span><span class="n">module_ctx</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># Select the maximal required version in the dependency graph.</span>
</span></span><span class="line"><span class="cl">        <span class="n">version</span> <span class="o">=</span> <span class="s2">&#34;1.0&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">mod</span> <span class="ow">in</span> <span class="n">module_ctx</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">mod</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">version</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">version</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">version</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">data_deps</span><span class="p">(</span><span class="n">version</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">data_deps_extension</span> <span class="o">=</span> <span class="n">module_extension</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">implementation</span> <span class="o">=</span> <span class="n">_data_deps_extension_impl</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">tag_classes</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&#34;data&#34;</span><span class="p">:</span> <span class="n">data</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="err">```</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="err">```</span>
</span></span><span class="line"><span class="cl">    <span class="c1">## MODULE.bazel in bar</span>
</span></span><span class="line"><span class="cl">    <span class="n">bazel_dep</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;foo&#34;</span><span class="p">,</span> <span class="n">version</span> <span class="o">=</span> <span class="s2">&#34;1.0&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">foo_data_deps</span> <span class="o">=</span> <span class="n">use_extension</span><span class="p">(</span><span class="s2">&#34;@foo//:extensions.bzl&#34;</span><span class="p">,</span> <span class="s2">&#34;data_deps_extension&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">foo_data_deps</span><span class="o">.</span><span class="n">data</span><span class="p">(</span><span class="n">version</span> <span class="o">=</span> <span class="s2">&#34;3.0&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">use_repo</span><span class="p">(</span><span class="n">foo_data_deps</span><span class="p">,</span> <span class="s2">&#34;data_file&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="err">```</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="err">```</span>
</span></span><span class="line"><span class="cl">    <span class="c1">## MODULE.bazel in root module</span>
</span></span><span class="line"><span class="cl">    <span class="n">bazel_dep</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;foo&#34;</span><span class="p">,</span> <span class="n">version</span> <span class="o">=</span> <span class="s2">&#34;1.0&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">bazel_dep</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;bar&#34;</span><span class="p">,</span> <span class="n">version</span> <span class="o">=</span> <span class="s2">&#34;1.0&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">foo_data_deps</span> <span class="o">=</span> <span class="n">use_extension</span><span class="p">(</span><span class="s2">&#34;@foo//:extensions.bzl&#34;</span><span class="p">,</span> <span class="s2">&#34;data_deps_extension&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">foo_data_deps</span><span class="o">.</span><span class="n">data</span><span class="p">(</span><span class="n">version</span> <span class="o">=</span> <span class="s2">&#34;2.0&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">use_repo</span><span class="p">(</span><span class="n">foo_data_deps</span><span class="p">,</span> <span class="s2">&#34;data_file&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="err">```</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">In</span> <span class="n">this</span> <span class="k">case</span><span class="p">,</span> <span class="n">the</span> <span class="n">root</span> <span class="n">module</span> <span class="n">requires</span> <span class="n">data</span> <span class="n">version</span> <span class="err">`</span><span class="mf">2.0</span><span class="err">`</span><span class="p">,</span> <span class="k">while</span> <span class="n">its</span>
</span></span><span class="line"><span class="cl">    <span class="n">dependency</span> <span class="err">`</span><span class="n">bar</span><span class="err">`</span> <span class="n">requires</span> <span class="err">`</span><span class="mf">3.0</span><span class="err">`</span><span class="o">.</span> <span class="n">The</span> <span class="n">module</span> <span class="n">extension</span> <span class="ow">in</span> <span class="err">`</span><span class="n">foo</span><span class="err">`</span> <span class="n">can</span> <span class="n">correctly</span>
</span></span><span class="line"><span class="cl">    <span class="n">resolve</span> <span class="n">this</span> <span class="n">conflict</span> <span class="ow">and</span> <span class="n">automatically</span> <span class="n">select</span> <span class="n">version</span> <span class="err">`</span><span class="mf">3.0</span><span class="err">`</span> <span class="k">for</span> <span class="n">the</span> <span class="n">data</span>
</span></span><span class="line"><span class="cl">    <span class="n">dependency</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">### Integrate third party package manager</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">Following</span> <span class="n">the</span> <span class="n">last</span> <span class="n">section</span><span class="p">,</span> <span class="n">since</span> <span class="n">module</span> <span class="n">extension</span> <span class="n">provides</span> <span class="n">a</span> <span class="n">way</span> <span class="n">to</span> <span class="n">collect</span>
</span></span><span class="line"><span class="cl"><span class="n">information</span> <span class="n">from</span> <span class="n">the</span> <span class="n">dependency</span> <span class="n">graph</span><span class="p">,</span> <span class="n">perform</span> <span class="n">custom</span> <span class="n">logic</span> <span class="n">to</span> <span class="n">resolve</span>
</span></span><span class="line"><span class="cl"><span class="n">dependencies</span> <span class="ow">and</span> <span class="n">call</span> <span class="n">repository</span> <span class="n">rules</span> <span class="n">to</span> <span class="n">introduce</span> <span class="n">external</span> <span class="n">repositories</span><span class="p">,</span> <span class="n">this</span>
</span></span><span class="line"><span class="cl"><span class="n">provides</span> <span class="n">a</span> <span class="n">great</span> <span class="n">way</span> <span class="k">for</span> <span class="n">rules</span> <span class="n">authors</span> <span class="n">to</span> <span class="n">enhance</span> <span class="n">the</span> <span class="n">rulesets</span> <span class="n">that</span> <span class="n">integrate</span>
</span></span><span class="line"><span class="cl"><span class="n">package</span> <span class="n">managers</span> <span class="k">for</span> <span class="n">specific</span> <span class="n">languages</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">Please</span> <span class="n">read</span> <span class="n">the</span> <span class="p">[</span><span class="n">module</span> <span class="n">extensions</span><span class="p">](</span><span class="o">/</span><span class="n">external</span><span class="o">/</span><span class="n">extension</span><span class="o">/</span><span class="p">)</span> <span class="n">page</span> <span class="n">to</span> <span class="n">learn</span> <span class="n">more</span>
</span></span><span class="line"><span class="cl"><span class="n">about</span> <span class="n">how</span> <span class="n">to</span> <span class="n">use</span> <span class="n">module</span> <span class="n">extensions</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">Here</span> <span class="n">is</span> <span class="n">a</span> <span class="n">list</span> <span class="n">of</span> <span class="n">the</span> <span class="n">rulesets</span> <span class="n">that</span> <span class="n">already</span> <span class="n">adopted</span> <span class="n">Bzlmod</span> <span class="n">to</span> <span class="n">fetch</span> <span class="n">dependencies</span>
</span></span><span class="line"><span class="cl"><span class="n">from</span> <span class="n">different</span> <span class="n">package</span> <span class="n">managers</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="p">[</span><span class="n">rules_jvm_external</span><span class="p">](</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">bazelbuild</span><span class="o">/</span><span class="n">rules_jvm_external</span><span class="o">/</span><span class="n">blob</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">docs</span><span class="o">/</span><span class="n">bzlmod</span><span class="o">.</span><span class="n">md</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="p">[</span><span class="n">rules_go</span><span class="p">](</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">bazelbuild</span><span class="o">/</span><span class="n">rules_go</span><span class="o">/</span><span class="n">blob</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">docs</span><span class="o">/</span><span class="n">go</span><span class="o">/</span><span class="n">core</span><span class="o">/</span><span class="n">bzlmod</span><span class="o">.</span><span class="n">md</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="p">[</span><span class="n">rules_python</span><span class="p">](</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">bazelbuild</span><span class="o">/</span><span class="n">rules_python</span><span class="o">/</span><span class="n">blob</span><span class="o">/</span><span class="n">main</span><span class="o">/</span><span class="n">BZLMOD_SUPPORT</span><span class="o">.</span><span class="n">md</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">A</span> <span class="n">minimal</span> <span class="n">example</span> <span class="n">that</span> <span class="n">integrates</span> <span class="n">a</span> <span class="n">pseudo</span> <span class="n">package</span> <span class="n">manager</span> <span class="n">is</span> <span class="n">available</span> <span class="n">at</span> <span class="n">the</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">examples</span><span class="p">][</span><span class="n">pkg</span><span class="o">-</span><span class="n">mgr</span><span class="o">-</span><span class="n">example</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">repository</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">pkg</span><span class="o">-</span><span class="n">mgr</span><span class="o">-</span><span class="n">example</span><span class="p">]:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">bazelbuild</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">tree</span><span class="o">/</span><span class="n">main</span><span class="o">/</span><span class="n">bzlmod</span><span class="o">/</span><span class="mi">05</span><span class="o">-</span><span class="n">integrate_third_party_package_manager</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">### Detect toolchains on the host machine</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">When</span> <span class="n">Bazel</span> <span class="n">build</span> <span class="n">rules</span> <span class="n">need</span> <span class="n">to</span> <span class="n">detect</span> <span class="n">what</span> <span class="n">toolchains</span> <span class="n">are</span> <span class="n">available</span> <span class="n">on</span> <span class="n">your</span> <span class="n">host</span>
</span></span><span class="line"><span class="cl"><span class="n">machine</span><span class="p">,</span> <span class="n">they</span> <span class="n">use</span> <span class="n">repository</span> <span class="n">rules</span> <span class="n">to</span> <span class="n">inspect</span> <span class="n">the</span> <span class="n">host</span> <span class="n">machine</span> <span class="ow">and</span> <span class="n">generate</span>
</span></span><span class="line"><span class="cl"><span class="n">toolchain</span> <span class="n">info</span> <span class="n">as</span> <span class="n">external</span> <span class="n">repositories</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">*</span>   <span class="o">**</span><span class="n">WORKSPACE</span><span class="o">**</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Given</span> <span class="n">the</span> <span class="n">following</span> <span class="n">repository</span> <span class="n">rule</span> <span class="n">to</span> <span class="n">detect</span> <span class="n">a</span> <span class="n">shell</span> <span class="n">toolchain</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="err">```</span>
</span></span><span class="line"><span class="cl">    <span class="c1">## local_config_sh.bzl</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">_sh_config_rule_impl</span><span class="p">(</span><span class="n">repository_ctx</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">sh_path</span> <span class="o">=</span> <span class="n">get_sh_path_from_env</span><span class="p">(</span><span class="s2">&#34;SH_BIN_PATH&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="ow">not</span> <span class="n">sh_path</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">sh_path</span> <span class="o">=</span> <span class="n">detect_sh_from_path</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="ow">not</span> <span class="n">sh_path</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">sh_path</span> <span class="o">=</span> <span class="s2">&#34;/shell/binary/not/found&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">repository_ctx</span><span class="o">.</span><span class="n">file</span><span class="p">(</span><span class="s2">&#34;BUILD&#34;</span><span class="p">,</span> <span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">    load(&#34;@bazel_tools//tools/sh:sh_toolchain.bzl&#34;, &#34;sh_toolchain&#34;)
</span></span></span><span class="line"><span class="cl"><span class="s2">    sh_toolchain(
</span></span></span><span class="line"><span class="cl"><span class="s2">        name = &#34;local_sh&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s2">        path = &#34;{sh_path}&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s2">        visibility = [&#34;//visibility:public&#34;],
</span></span></span><span class="line"><span class="cl"><span class="s2">    )
</span></span></span><span class="line"><span class="cl"><span class="s2">    toolchain(
</span></span></span><span class="line"><span class="cl"><span class="s2">        name = &#34;local_sh_toolchain&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s2">        toolchain = &#34;:local_sh&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s2">        toolchain_type = &#34;@bazel_tools//tools/sh:toolchain_type&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s2">    )
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sh_path</span> <span class="o">=</span> <span class="n">sh_path</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">sh_config_rule</span> <span class="o">=</span> <span class="n">repository_rule</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">environ</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;SH_BIN_PATH&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="n">local</span> <span class="o">=</span> <span class="n">True</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">implementation</span> <span class="o">=</span> <span class="n">_sh_config_rule_impl</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="err">```</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">You</span> <span class="n">can</span> <span class="nb">load</span> <span class="n">the</span> <span class="n">repository</span> <span class="n">rule</span> <span class="ow">in</span> <span class="n">WORKSPACE</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="err">```</span>
</span></span><span class="line"><span class="cl">    <span class="c1">## WORKSPACE</span>
</span></span><span class="line"><span class="cl">    <span class="nb">load</span><span class="p">(</span><span class="s2">&#34;//:local_config_sh.bzl&#34;</span><span class="p">,</span> <span class="s2">&#34;sh_config_rule&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">sh_config_rule</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;local_config_sh&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="err">```</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">*</span>   <span class="o">**</span><span class="n">Bzlmod</span><span class="o">**</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">With</span> <span class="n">Bzlmod</span><span class="p">,</span> <span class="n">you</span> <span class="n">can</span> <span class="n">introduce</span> <span class="n">the</span> <span class="n">same</span> <span class="n">repository</span> <span class="n">using</span> <span class="n">a</span> <span class="n">module</span> <span class="n">extension</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">which</span> <span class="n">is</span> <span class="n">similar</span> <span class="n">to</span> <span class="n">introducing</span> <span class="n">the</span> <span class="err">`@</span><span class="n">data_file</span><span class="err">`</span> <span class="n">repository</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">last</span>
</span></span><span class="line"><span class="cl">    <span class="n">section</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="err">```</span>
</span></span><span class="line"><span class="cl">    <span class="c1">## local_config_sh_extension.bzl</span>
</span></span><span class="line"><span class="cl">    <span class="nb">load</span><span class="p">(</span><span class="s2">&#34;//:local_config_sh.bzl&#34;</span><span class="p">,</span> <span class="s2">&#34;sh_config_rule&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">sh_config_extension</span> <span class="o">=</span> <span class="n">module_extension</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">implementation</span> <span class="o">=</span> <span class="n">lambda</span> <span class="n">ctx</span><span class="p">:</span> <span class="n">sh_config_rule</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;local_config_sh&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="err">```</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Then</span> <span class="n">use</span> <span class="n">the</span> <span class="n">extension</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">MODULE</span><span class="o">.</span><span class="n">bazel</span> <span class="n">file</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="err">```</span>
</span></span><span class="line"><span class="cl">    <span class="c1">## MODULE.bazel</span>
</span></span><span class="line"><span class="cl">    <span class="n">sh_config_ext</span> <span class="o">=</span> <span class="n">use_extension</span><span class="p">(</span><span class="s2">&#34;//:local_config_sh_extension.bzl&#34;</span><span class="p">,</span> <span class="s2">&#34;sh_config_extension&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">use_repo</span><span class="p">(</span><span class="n">sh_config_ext</span><span class="p">,</span> <span class="s2">&#34;local_config_sh&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="err">```</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">### Register toolchains &amp; execution platforms</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">Following</span> <span class="n">the</span> <span class="n">last</span> <span class="n">section</span><span class="p">,</span> <span class="n">after</span> <span class="n">introducing</span> <span class="n">a</span> <span class="n">repository</span> <span class="n">hosting</span> <span class="n">toolchain</span>
</span></span><span class="line"><span class="cl"><span class="n">information</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span> <span class="err">`</span><span class="n">local_config_sh</span><span class="err">`</span><span class="p">),</span> <span class="n">you</span> <span class="n">probably</span> <span class="n">want</span> <span class="n">to</span> <span class="n">register</span> <span class="n">the</span>
</span></span><span class="line"><span class="cl"><span class="n">toolchain</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">*</span>   <span class="o">**</span><span class="n">WORKSPACE</span><span class="o">**</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">With</span> <span class="n">WORKSPACE</span><span class="p">,</span> <span class="n">you</span> <span class="n">can</span> <span class="n">register</span> <span class="n">the</span> <span class="n">toolchain</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">following</span> <span class="n">ways</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="mf">1.</span>  <span class="n">You</span> <span class="n">can</span> <span class="n">register</span> <span class="n">the</span> <span class="n">toolchain</span> <span class="n">the</span> <span class="err">`</span><span class="o">.</span><span class="n">bzl</span><span class="err">`</span> <span class="n">file</span> <span class="ow">and</span> <span class="nb">load</span> <span class="n">the</span> <span class="n">macro</span> <span class="ow">in</span> <span class="n">the</span>
</span></span><span class="line"><span class="cl">    <span class="n">WORKSPACE</span> <span class="n">file</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="err">```</span>
</span></span><span class="line"><span class="cl">        <span class="c1">## local_config_sh.bzl</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">sh_configure</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">            <span class="n">sh_config_rule</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;local_config_sh&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">native</span><span class="o">.</span><span class="n">register_toolchains</span><span class="p">(</span><span class="s2">&#34;@local_config_sh//:local_sh_toolchain&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="err">```</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="err">```</span>
</span></span><span class="line"><span class="cl">        <span class="c1">## WORKSPACE</span>
</span></span><span class="line"><span class="cl">        <span class="nb">load</span><span class="p">(</span><span class="s2">&#34;//:local_config_sh.bzl&#34;</span><span class="p">,</span> <span class="s2">&#34;sh_configure&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">sh_configure</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="err">```</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="mf">2.</span>  <span class="n">Or</span> <span class="n">register</span> <span class="n">the</span> <span class="n">toolchain</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">WORKSPACE</span> <span class="n">file</span> <span class="n">directly</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="err">```</span>
</span></span><span class="line"><span class="cl">        <span class="c1">## WORKSPACE</span>
</span></span><span class="line"><span class="cl">        <span class="nb">load</span><span class="p">(</span><span class="s2">&#34;//:local_config_sh.bzl&#34;</span><span class="p">,</span> <span class="s2">&#34;sh_config_rule&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">sh_config_rule</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;local_config_sh&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">register_toolchains</span><span class="p">(</span><span class="s2">&#34;@local_config_sh//:local_sh_toolchain&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="err">```</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">*</span>   <span class="o">**</span><span class="n">Bzlmod</span><span class="o">**</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">With</span> <span class="n">Bzlmod</span><span class="p">,</span> <span class="n">the</span>
</span></span><span class="line"><span class="cl">    <span class="p">[</span><span class="err">`</span><span class="n">register_toolchains</span><span class="err">`</span><span class="p">](</span><span class="o">/</span><span class="n">rules</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">globals</span><span class="o">/</span><span class="n">module</span><span class="c1">#register_toolchains/) and</span>
</span></span><span class="line"><span class="cl">    <span class="p">[</span><span class="err">`</span><span class="n">register_execution_platforms</span><span class="err">`</span><span class="p">][</span><span class="n">register_execution_platforms</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="n">APIs</span> <span class="n">are</span> <span class="n">only</span> <span class="n">available</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">MODULE</span><span class="o">.</span><span class="n">bazel</span> <span class="n">file</span><span class="o">.</span> <span class="n">You</span> <span class="n">cannot</span> <span class="n">call</span>
</span></span><span class="line"><span class="cl">    <span class="err">`</span><span class="n">native</span><span class="o">.</span><span class="n">register_toolchains</span><span class="err">`</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">module</span> <span class="n">extension</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="err">```</span>
</span></span><span class="line"><span class="cl">    <span class="c1">## MODULE.bazel</span>
</span></span><span class="line"><span class="cl">    <span class="n">sh_config_ext</span> <span class="o">=</span> <span class="n">use_extension</span><span class="p">(</span><span class="s2">&#34;//:local_config_sh_extension.bzl&#34;</span><span class="p">,</span> <span class="s2">&#34;sh_config_extension&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">use_repo</span><span class="p">(</span><span class="n">sh_config_ext</span><span class="p">,</span> <span class="s2">&#34;local_config_sh&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">register_toolchains</span><span class="p">(</span><span class="s2">&#34;@local_config_sh//:local_sh_toolchain&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="err">```</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">The</span> <span class="n">toolchains</span> <span class="ow">and</span> <span class="n">execution</span> <span class="n">platforms</span> <span class="n">registered</span> <span class="ow">in</span> <span class="err">`</span><span class="n">WORKSPACE</span><span class="err">`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="err">`</span><span class="n">WORKSPACE</span><span class="o">.</span><span class="n">bzlmod</span><span class="err">`</span> <span class="ow">and</span> <span class="n">each</span> <span class="n">Bazel</span> <span class="n">module</span><span class="s1">&#39;s `MODULE.bazel` file follow this</span>
</span></span><span class="line"><span class="cl"><span class="n">order</span> <span class="n">of</span> <span class="n">precedence</span> <span class="n">during</span> <span class="n">toolchain</span> <span class="n">selection</span> <span class="p">(</span><span class="n">from</span> <span class="n">highest</span> <span class="n">to</span> <span class="n">lowest</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="mf">1.</span> <span class="n">toolchains</span> <span class="ow">and</span> <span class="n">execution</span> <span class="n">platforms</span> <span class="n">registered</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">root</span> <span class="n">module</span><span class="s1">&#39;s</span>
</span></span><span class="line"><span class="cl">   <span class="err">`</span><span class="n">MODULE</span><span class="o">.</span><span class="n">bazel</span><span class="err">`</span> <span class="n">file</span><span class="o">.</span>
</span></span><span class="line"><span class="cl"><span class="mf">2.</span> <span class="n">toolchains</span> <span class="ow">and</span> <span class="n">execution</span> <span class="n">platforms</span> <span class="n">registered</span> <span class="ow">in</span> <span class="n">the</span> <span class="err">`</span><span class="n">WORKSPACE</span><span class="err">`</span> <span class="ow">or</span>
</span></span><span class="line"><span class="cl">   <span class="err">`</span><span class="n">WORKSPACE</span><span class="o">.</span><span class="n">bzlmod</span><span class="err">`</span> <span class="n">file</span><span class="o">.</span>
</span></span><span class="line"><span class="cl"><span class="mf">3.</span> <span class="n">toolchains</span> <span class="ow">and</span> <span class="n">execution</span> <span class="n">platforms</span> <span class="n">registered</span> <span class="n">by</span> <span class="n">modules</span> <span class="n">that</span> <span class="n">are</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="n">transitive</span><span class="p">)</span> <span class="n">dependencies</span> <span class="n">of</span> <span class="n">the</span> <span class="n">root</span> <span class="n">module</span><span class="o">.</span>
</span></span><span class="line"><span class="cl"><span class="mf">4.</span> <span class="n">when</span> <span class="ow">not</span> <span class="n">using</span> <span class="err">`</span><span class="n">WORKSPACE</span><span class="o">.</span><span class="n">bzlmod</span><span class="err">`</span><span class="p">:</span> <span class="n">toolchains</span> <span class="n">registered</span> <span class="ow">in</span> <span class="n">the</span> <span class="err">`</span><span class="n">WORKSPACE</span><span class="err">`</span>
</span></span><span class="line"><span class="cl">   <span class="p">[</span><span class="n">suffix</span><span class="p">](</span><span class="o">/</span><span class="n">external</span><span class="o">/</span><span class="n">migration</span><span class="c1">#builtin-default-deps/).</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">register_execution_platforms</span><span class="p">]:</span> <span class="o">/</span><span class="n">rules</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">globals</span><span class="o">/</span><span class="n">module</span><span class="c1">#register_execution_platforms</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">### Introduce local repositories</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">You</span> <span class="n">may</span> <span class="n">need</span> <span class="n">to</span> <span class="n">introduce</span> <span class="n">a</span> <span class="n">dependency</span> <span class="n">as</span> <span class="n">a</span> <span class="n">local</span> <span class="n">repository</span> <span class="n">when</span> <span class="n">you</span> <span class="n">need</span> <span class="n">a</span>
</span></span><span class="line"><span class="cl"><span class="n">local</span> <span class="n">version</span> <span class="n">of</span> <span class="n">the</span> <span class="n">dependency</span> <span class="k">for</span> <span class="n">debugging</span> <span class="ow">or</span> <span class="n">you</span> <span class="n">want</span> <span class="n">to</span> <span class="n">incorporate</span> <span class="n">a</span>
</span></span><span class="line"><span class="cl"><span class="n">directory</span> <span class="ow">in</span> <span class="n">your</span> <span class="n">workspace</span> <span class="n">as</span> <span class="n">external</span> <span class="n">repository</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">*</span>   <span class="o">**</span><span class="n">WORKSPACE</span><span class="o">**</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">With</span> <span class="n">WORKSPACE</span><span class="p">,</span> <span class="n">this</span> <span class="n">is</span> <span class="n">achieved</span> <span class="n">by</span> <span class="n">two</span> <span class="n">native</span> <span class="n">repository</span> <span class="n">rules</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">[</span><span class="err">`</span><span class="n">local_repository</span><span class="err">`</span><span class="p">](</span><span class="o">/</span><span class="n">reference</span><span class="o">/</span><span class="n">be</span><span class="o">/</span><span class="n">workspace</span><span class="c1">#local_repository/) and</span>
</span></span><span class="line"><span class="cl">    <span class="p">[</span><span class="err">`</span><span class="n">new_local_repository</span><span class="err">`</span><span class="p">](</span><span class="o">/</span><span class="n">reference</span><span class="o">/</span><span class="n">be</span><span class="o">/</span><span class="n">workspace</span><span class="c1">#new_local_repository/).</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="err">```</span>
</span></span><span class="line"><span class="cl">    <span class="c1">## WORKSPACE</span>
</span></span><span class="line"><span class="cl">    <span class="n">local_repository</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;rules_java&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">path</span> <span class="o">=</span> <span class="s2">&#34;/Users/bazel_user/workspace/rules_java&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="err">```</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">*</span>   <span class="o">**</span><span class="n">Bzlmod</span><span class="o">**</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">With</span> <span class="n">Bzlmod</span><span class="p">,</span> <span class="n">you</span> <span class="n">can</span> <span class="n">use</span>
</span></span><span class="line"><span class="cl">    <span class="p">[</span><span class="err">`</span><span class="n">local_path_override</span><span class="err">`</span><span class="p">](</span><span class="o">/</span><span class="n">rules</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">globals</span><span class="o">/</span><span class="n">module</span><span class="c1">#local_path_override/) to</span>
</span></span><span class="line"><span class="cl">    <span class="n">override</span> <span class="n">a</span> <span class="n">module</span> <span class="n">with</span> <span class="n">a</span> <span class="n">local</span> <span class="n">path</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="err">```</span>
</span></span><span class="line"><span class="cl">    <span class="c1">## MODULE.bazel</span>
</span></span><span class="line"><span class="cl">    <span class="n">bazel_dep</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;rules_java&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">local_path_override</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">module_name</span> <span class="o">=</span> <span class="s2">&#34;rules_java&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">path</span> <span class="o">=</span> <span class="s2">&#34;/Users/bazel_user/workspace/rules_java&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="err">```</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Note</span><span class="p">:</span> <span class="n">With</span> <span class="err">`</span><span class="n">local_path_override</span><span class="err">`</span><span class="p">,</span> <span class="n">you</span> <span class="n">can</span> <span class="n">only</span> <span class="n">introduce</span> <span class="n">a</span> <span class="n">local</span> <span class="n">directory</span>
</span></span><span class="line"><span class="cl">    <span class="n">as</span> <span class="n">a</span> <span class="n">Bazel</span> <span class="n">module</span><span class="p">,</span> <span class="n">which</span> <span class="n">means</span> <span class="n">it</span> <span class="n">should</span> <span class="n">have</span> <span class="n">a</span> <span class="n">MODULE</span><span class="o">.</span><span class="n">bazel</span> <span class="n">file</span> <span class="ow">and</span> <span class="n">its</span>
</span></span><span class="line"><span class="cl">    <span class="n">transitive</span> <span class="n">dependencies</span> <span class="n">are</span> <span class="n">taken</span> <span class="n">into</span> <span class="n">consideration</span> <span class="n">during</span> <span class="n">dependency</span>
</span></span><span class="line"><span class="cl">    <span class="n">resolution</span><span class="o">.</span> <span class="n">In</span> <span class="n">addition</span><span class="p">,</span> <span class="n">all</span> <span class="n">module</span> <span class="n">override</span> <span class="n">directives</span> <span class="n">can</span> <span class="n">only</span> <span class="n">be</span> <span class="n">used</span> <span class="n">by</span>
</span></span><span class="line"><span class="cl">    <span class="n">the</span> <span class="n">root</span> <span class="n">module</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">It</span> <span class="n">is</span> <span class="n">also</span> <span class="n">possible</span> <span class="n">to</span> <span class="n">introduce</span> <span class="n">a</span> <span class="n">local</span> <span class="n">repository</span> <span class="n">with</span> <span class="n">module</span> <span class="n">extension</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">    <span class="n">However</span><span class="p">,</span> <span class="n">you</span> <span class="n">cannot</span> <span class="n">call</span> <span class="err">`</span><span class="n">native</span><span class="o">.</span><span class="n">local_repository</span><span class="err">`</span> <span class="ow">in</span> <span class="n">module</span> <span class="n">extension</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">there</span> <span class="n">is</span> <span class="n">ongoing</span> <span class="n">effort</span> <span class="n">on</span> <span class="n">starlarkifying</span> <span class="n">all</span> <span class="n">native</span> <span class="n">repository</span> <span class="n">rules</span> <span class="p">(</span><span class="n">check</span>
</span></span><span class="line"><span class="cl">    <span class="p">[</span><span class="c1">#18285](https://github.com/bazelbuild/bazel/issues/18285) for progress).</span>
</span></span><span class="line"><span class="cl">    <span class="n">Then</span> <span class="n">you</span> <span class="n">can</span> <span class="n">call</span> <span class="n">the</span> <span class="n">corresponding</span> <span class="n">starlark</span> <span class="err">`</span><span class="n">local_repository</span><span class="err">`</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">module</span>
</span></span><span class="line"><span class="cl">    <span class="n">extension</span><span class="o">.</span> <span class="n">It</span><span class="s1">&#39;s also trivial to implement a custom version of</span>
</span></span><span class="line"><span class="cl">    <span class="err">`</span><span class="n">local_repository</span><span class="err">`</span> <span class="n">repository</span> <span class="n">rule</span> <span class="k">if</span> <span class="n">this</span> <span class="n">is</span> <span class="n">a</span> <span class="n">blocking</span> <span class="n">issue</span> <span class="k">for</span> <span class="n">you</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">### Bind targets</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">The</span> <span class="p">[</span><span class="err">`</span><span class="n">bind</span><span class="err">`</span><span class="p">](</span><span class="o">/</span><span class="n">reference</span><span class="o">/</span><span class="n">be</span><span class="o">/</span><span class="n">workspace</span><span class="c1">#bind/) rule in WORKSPACE is deprecated and</span>
</span></span><span class="line"><span class="cl"><span class="ow">not</span> <span class="n">supported</span> <span class="ow">in</span> <span class="n">Bzlmod</span><span class="o">.</span> <span class="n">It</span> <span class="n">was</span> <span class="n">introduced</span> <span class="n">to</span> <span class="n">give</span> <span class="n">a</span> <span class="n">target</span> <span class="n">an</span> <span class="n">alias</span> <span class="ow">in</span> <span class="n">the</span>
</span></span><span class="line"><span class="cl"><span class="n">special</span> <span class="err">`</span><span class="o">//</span><span class="n">external</span><span class="err">`</span> <span class="n">package</span><span class="o">.</span> <span class="n">All</span> <span class="n">users</span> <span class="n">depending</span> <span class="n">on</span> <span class="n">this</span> <span class="n">should</span> <span class="n">migrate</span> <span class="n">away</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">For</span> <span class="n">example</span><span class="p">,</span> <span class="k">if</span> <span class="n">you</span> <span class="n">have</span>
</span></span></code></pre></div><h2 id="workspace">WORKSPACE</h2>
<p>bind(
name = &ldquo;openssl&rdquo;,
actual = &ldquo;@my-ssl//src:openssl-lib&rdquo;,
)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">This allows other targets to depend on `//external:openssl`. You can migrate
</span></span><span class="line"><span class="cl">away from this by:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">*   Replace all usages of `//external:openssl` with `@my-ssl//src:openssl-lib`.
</span></span><span class="line"><span class="cl">    *   Tip: Use `bazel query --output=build --noenable_bzlmod
</span></span><span class="line"><span class="cl">        --enable_workspace [target]` command to find relevant info
</span></span><span class="line"><span class="cl">        about the target.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">*   Or use the [`alias`](/reference/be/general#alias/) build rule
</span></span><span class="line"><span class="cl">    *   Define the following target in a package (e.g. `//third_party`)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        ```
</span></span><span class="line"><span class="cl">        ## third_party/BUILD
</span></span><span class="line"><span class="cl">        alias(
</span></span><span class="line"><span class="cl">            name = &#34;openssl&#34;,
</span></span><span class="line"><span class="cl">            actual = &#34;@my-ssl//src:openssl-lib&#34;,
</span></span><span class="line"><span class="cl">        )
</span></span><span class="line"><span class="cl">        ```
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    *   Replace all usages of `//external:openssl` with `//third_party:openssl`.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">### Fetch versus Sync
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Fetch and sync commands are used to download external repos locally and keep
</span></span><span class="line"><span class="cl">them updated. Sometimes also to allow building offline using the `--nofetch`
</span></span><span class="line"><span class="cl">flag after fetching all repos needed for a build.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">*   **WORKSPACE**
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    Sync performs a force fetch for all repositories, or for a specific
</span></span><span class="line"><span class="cl">    configured set of repos, while fetch is _only_ used to fetch for a specific
</span></span><span class="line"><span class="cl">    target.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">*   **Bzlmod**
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    The sync command is no longer applicable, but fetch offers
</span></span><span class="line"><span class="cl">    [various options](/reference/command-line-reference#fetch-options/).
</span></span><span class="line"><span class="cl">    You can fetch a target, a repository, a set of configured repos or all
</span></span><span class="line"><span class="cl">    repositories involved in your dependency resolution and module extensions.
</span></span><span class="line"><span class="cl">    The fetch result is cached and to force a fetch you must include the
</span></span><span class="line"><span class="cl"> `--force` option during the fetch process.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">## Manual migration
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">This section provides useful information and guidance for your **manual** Bzlmod
</span></span><span class="line"><span class="cl">migration process. For more automatized migration process, check [recommended
</span></span><span class="line"><span class="cl">migration process](#how-migrate-to-bzlmod) section.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">### Know your dependencies in WORKSPACE
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">The first step of migration is to understand what dependencies you have. It
</span></span><span class="line"><span class="cl">could be hard to figure out what exact dependencies are introduced in the
</span></span><span class="line"><span class="cl">WORKSPACE file because transitive dependencies are often loaded with `*_deps`
</span></span><span class="line"><span class="cl">macros.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">#### Inspect external dependency with workspace resolved file
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Fortunately, the flag
</span></span><span class="line"><span class="cl">[`--experimental_repository_resolved_file`][resolved_file_flag]
</span></span><span class="line"><span class="cl">can help. This flag essentially generates a &#34;lock file&#34; of all fetched external
</span></span><span class="line"><span class="cl">dependencies in your last Bazel command. You can find more details in this [blog
</span></span><span class="line"><span class="cl">post](https://blog.bazel.build/2018/07/09/bazel-sync-and-resolved-file.html).
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[resolved_file_flag]: /reference/command-line-reference#flag--experimental_repository_resolved_file
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">It can be used in two ways:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">1.  To fetch info of external dependencies needed for building certain targets.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    ```
</span></span><span class="line"><span class="cl">    bazel clean --expunge
</span></span><span class="line"><span class="cl">    bazel build --nobuild --experimental_repository_resolved_file=resolved.bzl //foo:bar
</span></span><span class="line"><span class="cl">    ```
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">2.  To fetch info of all external dependencies defined in the WORKSPACE file.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    ```
</span></span><span class="line"><span class="cl">    bazel clean --expunge
</span></span><span class="line"><span class="cl">    bazel sync --experimental_repository_resolved_file=resolved.bzl
</span></span><span class="line"><span class="cl">    ```
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    With the `bazel sync` command, you can fetch all dependencies defined in the
</span></span><span class="line"><span class="cl">    WORKSPACE file, which include:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    *   `bind` usages
</span></span><span class="line"><span class="cl">    *   `register_toolchains` &amp; `register_execution_platforms` usages
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    However, if your project is cross platforms, bazel sync may break on certain
</span></span><span class="line"><span class="cl">    platforms because some repository rules may only run correctly on supported
</span></span><span class="line"><span class="cl">    platforms.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">After running the command, you should have information of your external
</span></span><span class="line"><span class="cl">dependencies in the `resolved.bzl` file.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">#### Inspect external dependency with `bazel query`
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">You may also know `bazel query` can be used for inspecting repository rules with
</span></span></code></pre></div><p>bazel query &ndash;output=build //external:<repo name></p>

<div class="chem">$$
While it is more convenient and much faster, [bazel query can lie about
external dependency version](https://github.com/bazelbuild/bazel/issues/12947),
so be careful using it! Querying and inspecting external
dependencies with Bzlmod is going to achieved by a [new
subcommand](https://github.com/bazelbuild/bazel/issues/15365).

#### Built-in default dependencies

If you check the file generated by `--experimental_repository_resolved_file`,
you are going to find many dependencies that are not defined in your WORKSPACE.
This is because Bazel in fact adds prefixes and suffixes to the user's WORKSPACE
file content to inject some default dependencies, which are usually required by
native rules (e.g. `@bazel_tools`, `@platforms` and `@remote_java_tools`). With
Bzlmod, those dependencies are introduced with a built-in module
[`bazel_tools`][bazel_tools] , which is a default dependency for every other
Bazel module.

[bazel_tools]: https://github.com/bazelbuild/bazel/blob/master/src/MODULE.tools

### Hybrid mode for gradual migration

Bzlmod and WORKSPACE can work side by side, which allows migrating dependencies
from the WORKSPACE file to Bzlmod to be a gradual process.

Note: In practice, loading "*_deps" macros in WORKSPACE often causes confusions
with Bzlmod dependencies, therefore we recommend starting with a
WORKSPACE.bzlmod file and avoid loading transitive dependencies with macros.

#### WORKSPACE.bzlmod

During the migration, Bazel users may need to switch between builds with and
without Bzlmod enabled. WORKSPACE.bzlmod support is implemented to make the
process smoother.

WORKSPACE.bzlmod has the exact same syntax as WORKSPACE. When Bzlmod is enabled,
if a WORKSPACE.bzlmod file also exists at the workspace root:

*   `WORKSPACE.bzlmod` takes effect and the content of `WORKSPACE` is ignored.
*   No [prefixes or suffixes](/external/migration#builtin-default-deps/) are
    added to the WORKSPACE.bzlmod file.

Using the WORKSPACE.bzlmod file can make the migration easier because:

*   When Bzlmod is disabled, you fall back to fetching dependencies from the
    original WORKSPACE file.
*   When Bzlmod is enabled, you can better track what dependencies are left to
    migrate with WORKSPACE.bzlmod.

#### Repository visibility

Bzlmod is able to control which other repositories are visible from a given
repository, check [repository names and strict
deps](/external/module#repository_names_and_strict_deps/) for more details.

Here is a summary of repository visibilities from different types of
repositories when also taking WORKSPACE into consideration.

| | From the main repo | From Bazel module repos | From module extension repos | From WORKSPACE repos |
|----------------|--------------------|-------------------------|---------------------------------------------------------------------------------------------------------------------|----------------------|
| The main repo  | Visible | If the root module is a direct dependency | If the root module is a direct dependency of the module hosting the module extension | Visible              |
| Bazel module repos | Direct deps | Direct deps | Direct deps of the module hosting the module extension | Direct deps of the root module |
| Module extension repos | Direct deps | Direct deps | Direct deps of the module hosting the module extension + all repos generated by the same module extension | Direct deps of the root module |
| WORKSPACE Repos | All visible | Not visible | Not visible | All visible |

Note: For the root module, if a repository `@foo` is defined in WORKSPACE and
`@foo` is also used as an [apparent repository
name](/external/overview#apparent-repo-name/) in MODULE.bazel, then `@foo`
refers to the one introduced in MODULE.bazel.

Note: For a module extension generated repository `@bar`, if `@foo` is used as
an [apparent repository name](/external/overview#apparent-repo-name/) of
another repository generated by the same module extension and direct
dependencies of the module hosting the module extension, then for repository
`@bar`, `@foo` refers to the latter.

### Manual migration process

A typical Bzlmod migration process can look like this:

1.  Understand what dependencies you have in WORKSPACE.
1.  Add an empty MODULE.bazel file at your project root.
1.  Add an empty WORKSPACE.bzlmod file to override the WORKSPACE file content.
1.  Build your targets with Bzlmod enabled and check which repository is
    missing.
1.  Check the definition of the missing repository in the resolved dependency
    file.
1.  Introduce the missing dependency as a Bazel module, through a module
    extension, or leave it in the WORKSPACE.bzlmod for later migration.
1.  Go back to 4 and repeat until all dependencies are available.

## Publish Bazel modules

If your Bazel project is a dependency for other projects, you can publish your
project in the [Bazel Central Registry](https://registry.bazel.build/).

To be able to check in your project in the BCR, you need a source archive URL of
the project. Take note of a few things when creating the source archive:

*   **Make sure the archive is pointing to a specific version.**

    The BCR can only accept versioned source archives because Bzlmod needs to
    conduct version comparison during dependency resolution.

*   **Make sure the archive URL is stable.**

    Bazel verifies the content of the archive by a hash value, so you should
    make sure the checksum of the downloaded file never changes. If the URL is
    from GitHub, please create and upload a release archive in the release page.
    GitHub isn't going to guarantee the checksum of source archives generated on
    demand. In short, URLs in the form of
    `https://github.com/<org>/<repo>/releases/download/...` is considered stable
    while `https://github.com/<org>/<repo>/archive/...` is not. Check [GitHub
    Archive Checksum
    Outage](https://blog.bazel.build/2023/02/15/github-archive-checksum.html)
    for more context.

*   **Make sure the source tree follows the layout of the original repository.**

    In case your repository is very large and you want to create a distribution
    archive with reduced size by stripping out unnecessary sources, please make
    sure the stripped source tree is a subset of the original source tree. This
    makes it easier for end users to override the module to a non-release
    version by [`archive_override`](/rules/lib/globals/module#archive_override/)
    and [`git_override`](/rules/lib/globals/module#git_override/).

*   **Include a test module in a subdirectory that tests your most common
    APIs.**

    A test module is a Bazel project with its own WORKSPACE and MODULE.bazel
    file located in a subdirectory of the source archive which depends on the
    actual module to be published. It should contain examples or some
    integration tests that cover your most common APIs. Check
    [test module][test_module] to learn how to set it up.

[test_module]: https://github.com/bazelbuild/bazel-central-registry/tree/main/docs#test-module

When you have your source archive URL ready, follow the [BCR contribution
guidelines][bcr_contrib_guide] to submit your module to the BCR with a GitHub
Pull Request.

[bcr_contrib_guide]: https://github.com/bazelbuild/bazel-central-registry/tree/main/docs#contribute-a-bazel-module

It is **highly recommended** to set up the [Publish to
BCR](https://github.com/bazel-contrib/publish-to-bcr) GitHub App for your
repository to automate the process of submitting your module to the BCR.

## Best practices

This section documents a few best practices you should follow for better
managing your external dependencies.

#### Split targets into different packages to avoid fetching unnecessary dependencies.

Check [#12835](https://github.com/bazelbuild/bazel/issues/12835), where dev
dependencies for tests are forced to be fetched unnecessarily for building
targets that don't need them. This is actually not Bzlmod specific, but
following this practices makes it easier to specify dev dependencies correctly.

#### Specify dev dependencies

You can set the `dev_dependency` attribute to true for
[`bazel_dep`](/rules/lib/globals/module#bazel_dep/) and
[`use_extension`](/rules/lib/globals/module#use_extension/) directives so that
they don't propagate to dependent projects. As the root module, you can use the
[`--ignore_dev_dependency`][ignore_dev_dep_flag] flag to verify if your targets
still build without dev dependencies and overrides.

[ignore_dev_dep_flag]: /reference/command-line-reference#flag--ignore_dev_dependency

{# More best practices here !!! #}

## Community migration progress

You can check the [Bazel Central Registry](https://registry.bazel.build) to find
out if your dependencies are already available. Otherwise feel free to join this
[GitHub discussion](https://github.com/bazelbuild/bazel/discussions/18329) to
upvote or post the dependencies that are blocking your migration.

## Report issues

Please check the [Bazel GitHub issue list][bzlmod_github_issue] for known Bzlmod
issues. Feel free to file new issues or feature requests that can help unblock
your migration!

[bzlmod_github_issue]: https://github.com/bazelbuild/bazel/issues?q=is%3Aopen+is%3Aissue+label%3Aarea-Bzlmod$$</div>
	
</div>


          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        
      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        
      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        
      </div>
    </div>
  </div>
</footer>

    </div>
    
      <link rel="stylesheet" href="/css/katex.css" integrity="sha512-G&#43;oCKKieQtUzWNhprOMa35XKURS9yhyKtbm9/m0OOUykuK3/U6dKkqJIxGOoQh/T3MibO5FL8xd2QNhZd/wILA==" crossorigin="anonymous">
    
      <script defer src="/js/katex.js" integrity="sha512-WTufh9t&#43;K&#43;EFkEnso/VDkXWdyfw3x8Z7YoAX42Ec76nwKKkWT/2F57jYrEYwLYMj2hRm9i3W5LAxxd5Z1r6szg==" crossorigin="anonymous" ></script>
    
      <script defer src="/js/mhchem.js" integrity="sha512-VqgbnCOxfd22h/EoEuK6W8DhX3hATOAogWFE/eE4XVBVNg5uaWIocSccsU8FNeYDNpfcIKWy6xz3woYgsWdPxA==" crossorigin="anonymous" ></script>
    
      <script defer src="/js/auto-render.js" integrity="sha512-4bQtxbbsOaDcbu2OFUKZhKrd0X9F2cyGnIt84nVL3K1XpzeiZBzyEepWhMAb3ZUDylETFkLzgZoV8ZpTLIncow==" crossorigin="anonymous"
onload='renderMathInElement(document.body, null);'>
</script>
    <script src="/js/main.js"></script>
<script defer src="/js/click-to-copy.js" crossorigin="anonymous"></script>
<script src='/js/tabpane-persist.js'></script>

  </body>
</html>