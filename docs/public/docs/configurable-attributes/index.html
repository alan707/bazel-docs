<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Configurable Build Attributes | Bazel Documentation</title>
<meta name="description" content="Configurable attributes, commonly known as select(), is a Bazel feature that lets users toggle the values of build rule attributes at the command line.
This can be used, for example, for a multiplatform library that automatically chooses the appropriate implementation for the architecture, or for a feature-configurable binary that can be customized at build time.
Example # myapp/BUILD cc_binary( name = &#34;mybinary&#34;, srcs = [&#34;main.cc&#34;], deps = select({ &#34;:arm_build&#34;: [&#34;:arm_lib&#34;], &#34;:x86_debug_build&#34;: [&#34;:x86_dev_lib&#34;], &#34;//conditions:default&#34;: [&#34;:generic_lib&#34;], }), ) config_setting( name = &#34;arm_build&#34;, values = {&#34;cpu&#34;: &#34;arm&#34;}, ) config_setting( name = &#34;x86_debug_build&#34;, values = { &#34;cpu&#34;: &#34;x86&#34;, &#34;compilation_mode&#34;: &#34;dbg&#34;, }, ) This declares a cc_binary that “chooses” its deps based on the flags at the command line. Specifically, deps becomes:">
<meta property="og:url" content="http://localhost:1313/docs/configurable-attributes/">
  <meta property="og:site_name" content="Bazel Documentation">
  <meta property="og:title" content="Configurable Build Attributes">
  <meta property="og:description" content="Configurable attributes, commonly known as select(), is a Bazel feature that lets users toggle the values of build rule attributes at the command line.
This can be used, for example, for a multiplatform library that automatically chooses the appropriate implementation for the architecture, or for a feature-configurable binary that can be customized at build time.
Example # myapp/BUILD cc_binary( name = &#34;mybinary&#34;, srcs = [&#34;main.cc&#34;], deps = select({ &#34;:arm_build&#34;: [&#34;:arm_lib&#34;], &#34;:x86_debug_build&#34;: [&#34;:x86_dev_lib&#34;], &#34;//conditions:default&#34;: [&#34;:generic_lib&#34;], }), ) config_setting( name = &#34;arm_build&#34;, values = {&#34;cpu&#34;: &#34;arm&#34;}, ) config_setting( name = &#34;x86_debug_build&#34;, values = { &#34;cpu&#34;: &#34;x86&#34;, &#34;compilation_mode&#34;: &#34;dbg&#34;, }, ) This declares a cc_binary that “chooses” its deps based on the flags at the command line. Specifically, deps becomes:">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="docs">
    <meta property="article:published_time" content="2024-01-01T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-01-01T00:00:00+00:00">

  <meta itemprop="name" content="Configurable Build Attributes">
  <meta itemprop="description" content="Configurable attributes, commonly known as select(), is a Bazel feature that lets users toggle the values of build rule attributes at the command line.
This can be used, for example, for a multiplatform library that automatically chooses the appropriate implementation for the architecture, or for a feature-configurable binary that can be customized at build time.
Example # myapp/BUILD cc_binary( name = &#34;mybinary&#34;, srcs = [&#34;main.cc&#34;], deps = select({ &#34;:arm_build&#34;: [&#34;:arm_lib&#34;], &#34;:x86_debug_build&#34;: [&#34;:x86_dev_lib&#34;], &#34;//conditions:default&#34;: [&#34;:generic_lib&#34;], }), ) config_setting( name = &#34;arm_build&#34;, values = {&#34;cpu&#34;: &#34;arm&#34;}, ) config_setting( name = &#34;x86_debug_build&#34;, values = { &#34;cpu&#34;: &#34;x86&#34;, &#34;compilation_mode&#34;: &#34;dbg&#34;, }, ) This declares a cc_binary that “chooses” its deps based on the flags at the command line. Specifically, deps becomes:">
  <meta itemprop="datePublished" content="2024-01-01T00:00:00+00:00">
  <meta itemprop="dateModified" content="2024-01-01T00:00:00+00:00">
  <meta itemprop="wordCount" content="3388">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Configurable Build Attributes">
  <meta name="twitter:description" content="Configurable attributes, commonly known as select(), is a Bazel feature that lets users toggle the values of build rule attributes at the command line.
This can be used, for example, for a multiplatform library that automatically chooses the appropriate implementation for the architecture, or for a feature-configurable binary that can be customized at build time.
Example # myapp/BUILD cc_binary( name = &#34;mybinary&#34;, srcs = [&#34;main.cc&#34;], deps = select({ &#34;:arm_build&#34;: [&#34;:arm_lib&#34;], &#34;:x86_debug_build&#34;: [&#34;:x86_dev_lib&#34;], &#34;//conditions:default&#34;: [&#34;:generic_lib&#34;], }), ) config_setting( name = &#34;arm_build&#34;, values = {&#34;cpu&#34;: &#34;arm&#34;}, ) config_setting( name = &#34;x86_debug_build&#34;, values = { &#34;cpu&#34;: &#34;x86&#34;, &#34;compilation_mode&#34;: &#34;dbg&#34;, }, ) This declares a cc_binary that “chooses” its deps based on the flags at the command line. Specifically, deps becomes:">
<link href="/scss/main.css" rel="stylesheet">
<script
  src="https://code.jquery.com/jquery-3.7.1.min.js"
  integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
  crossorigin="anonymous"></script>

  </head>
  <body class="td-page">
    <header>
      <nav class="td-navbar js-navbar-scroll" data-bs-theme="dark">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class="navbar-brand__name">Bazel Documentation</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="/docs/"><span>Documentation</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/community/"><span>Community</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/about/"><span>About</span></a>
      </li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            <div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
    
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type="button" data-bs-toggle="collapse" data-bs-target="#td-section-nav" aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="td-sidebar-nav collapse" id="td-section-nav">
    <ul class="td-sidebar-nav__section pe-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m--li">
  <a href="/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-"><span class="">Bazel Documentation</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-help-li">
  <a href="/help/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-help"><span class="">Getting Help</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-concepts-li">
  <a href="/concepts/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-concepts"><span class="">Understanding Bazel</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-conceptsbuild-files-li">
  <a href="/concepts/build-files/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-conceptsbuild-files"><span class="">BUILD files</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-conceptsdependencies-li">
  <a href="/concepts/dependencies/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-conceptsdependencies"><span class="">Dependencies</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-conceptslabels-li">
  <a href="/concepts/labels/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-conceptslabels"><span class="">Labels</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-conceptsplatforms-li">
  <a href="/concepts/platforms/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-conceptsplatforms"><span class="">Migrating to Platforms</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-conceptsbuild-ref-li">
  <a href="/concepts/build-ref/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-conceptsbuild-ref"><span class="">Repositories, workspaces, packages, and targets</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-conceptsvisibility-li">
  <a href="/concepts/visibility/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-conceptsvisibility"><span class="">Visibility</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-basics-li">
  <a href="/basics/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-basics"><span class="">Basics</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-basicsartifact-based-builds-li">
  <a href="/basics/artifact-based-builds/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-basicsartifact-based-builds"><span class="">Artifact-Based Build Systems</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-basicsdependencies-li">
  <a href="/basics/dependencies/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-basicsdependencies"><span class="">Dependency Management</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-basicsdistributed-builds-li">
  <a href="/basics/distributed-builds/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-basicsdistributed-builds"><span class="">Distributed Builds</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-basicshermeticity-li">
  <a href="/basics/hermeticity/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-basicshermeticity"><span class="">Hermeticity</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-basicstask-based-builds-li">
  <a href="/basics/task-based-builds/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-basicstask-based-builds"><span class="">Task-Based Build Systems</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-basicsbuild-systems-li">
  <a href="/basics/build-systems/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-basicsbuild-systems"><span class="">Why a Build System?</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-tutorials-li">
  <a href="/tutorials/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-tutorials"><span class="">Tutorials</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-tutorialsccp-toolchain-config-li">
  <a href="/tutorials/ccp-toolchain-config/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-tutorialsccp-toolchain-config"><span class="">Bazel Tutorial: Configure C&#43;&#43; Toolchains</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-tutorialscpp-use-cases-li">
  <a href="/tutorials/cpp-use-cases/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-tutorialscpp-use-cases"><span class="">Common C&#43;&#43; Build Use Cases</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-tutorialscpp-dependency-li">
  <a href="/tutorials/cpp-dependency/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-tutorialscpp-dependency"><span class="">Review the dependency graph</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-tutorialscpp-labels-li">
  <a href="/tutorials/cpp-labels/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-tutorialscpp-labels"><span class="">Use labels to reference targets</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-configure-li">
  <a href="/configure/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-configure"><span class="">Configure</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-configurebest-practices-li">
  <a href="/configure/best-practices/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-configurebest-practices"><span class="">Best Practices</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-configurecoverage-li">
  <a href="/configure/coverage/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-configurecoverage"><span class="">Code coverage with Bazel</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-configureattributes-li">
  <a href="/configure/attributes/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-configureattributes"><span class="">Configurable Build Attributes</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-configureintegrate-cpp-li">
  <a href="/configure/integrate-cpp/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-configureintegrate-cpp"><span class="">Integrating with C&#43;&#43; Rules</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-configurewindows-li">
  <a href="/configure/windows/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-configurewindows"><span class="">Using Bazel on Windows</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-extending-li">
  <a href="/extending/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-extending"><span class="">Extending Bazel</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-extendingaspects-li">
  <a href="/extending/aspects/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-extendingaspects"><span class="">Aspects</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-extendingauto-exec-groups-li">
  <a href="/extending/auto-exec-groups/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-extendingauto-exec-groups"><span class="">Automatic Execution Groups (AEGs)</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-extendingconfig-li">
  <a href="/extending/config/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-extendingconfig"><span class="">Configurations</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-extendingdepsets-li">
  <a href="/extending/depsets/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-extendingdepsets"><span class="">Depsets</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-extendingexec-groups-li">
  <a href="/extending/exec-groups/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-extendingexec-groups"><span class="">Execution Groups</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-extendingconcepts-li">
  <a href="/extending/concepts/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-extendingconcepts"><span class="">Extension Overview</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-extendinglegacy-macros-li">
  <a href="/extending/legacy-macros/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-extendinglegacy-macros"><span class="">Legacy Macros</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-extendingmacros-li">
  <a href="/extending/macros/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-extendingmacros"><span class="">Macros</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-extendingplatforms-li">
  <a href="/extending/platforms/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-extendingplatforms"><span class="">Platforms</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-extendingrules-li">
  <a href="/extending/rules/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-extendingrules"><span class="">Rules</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-extendingtoolchains-li">
  <a href="/extending/toolchains/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-extendingtoolchains"><span class="">Toolchains</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-external-li">
  <a href="/external/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-external"><span class="">External</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-externalmod-command-li">
  <a href="/external/mod-command/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-externalmod-command"><span class="">`mod` Command</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-externallockfile-li">
  <a href="/external/lockfile/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-externallockfile"><span class="">Bazel Lockfile</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-externalmodule-li">
  <a href="/external/module/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-externalmodule"><span class="">Bazel modules</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-externalregistry-li">
  <a href="/external/registry/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-externalregistry"><span class="">Bazel registries</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-externalmigration-li">
  <a href="/external/migration/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-externalmigration"><span class="">Bzlmod Migration Guide</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-externaloverview-li">
  <a href="/external/overview/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-externaloverview"><span class="">External dependencies overview</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-externalfaq-li">
  <a href="/external/faq/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-externalfaq"><span class="">Frequently asked questions</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-externalextension-li">
  <a href="/external/extension/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-externalextension"><span class="">Module extensions</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-externalrepo-li">
  <a href="/external/repo/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-externalrepo"><span class="">Repository Rules</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-externalvendor-li">
  <a href="/external/vendor/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-externalvendor"><span class="">Vendor Mode</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-externalimages-li">
  <a href="/external/images/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-externalimages"><span class="">Images</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-remote-li">
  <a href="/remote/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-remote"><span class="">Remote</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-remoterules-li">
  <a href="/remote/rules/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-remoterules"><span class="">Adapting Bazel Rules for Remote Execution</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-remotebep-li">
  <a href="/remote/bep/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-remotebep"><span class="">Build Event Protocol</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-remotebep-examples-li">
  <a href="/remote/bep-examples/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-remotebep-examples"><span class="">Build Event Protocol Examples</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-remotebep-glossary-li">
  <a href="/remote/bep-glossary/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-remotebep-glossary"><span class="">Build Event Protocol Glossary</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-remoteci-li">
  <a href="/remote/ci/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-remoteci"><span class="">Configuring Bazel CI to Test Rules for Remote Execution</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-remotecreating-li">
  <a href="/remote/creating/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-remotecreating"><span class="">Creating Persistent Workers</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-remotecache-local-li">
  <a href="/remote/cache-local/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-remotecache-local"><span class="">Debugging Remote Cache Hits for Local Execution</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-remotecache-remote-li">
  <a href="/remote/cache-remote/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-remotecache-remote"><span class="">Debugging Remote Cache Hits for Remote Execution</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-remotedynamic-li">
  <a href="/remote/dynamic/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-remotedynamic"><span class="">Dynamic Execution</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-remoteworkspace-li">
  <a href="/remote/workspace/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-remoteworkspace"><span class="">Finding Non-Hermetic Behavior in WORKSPACE Rules</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-remotemultiplex-li">
  <a href="/remote/multiplex/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-remotemultiplex"><span class="">Multiplex Workers (Experimental Feature)</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-remoteoutput-directories-li">
  <a href="/remote/output-directories/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-remoteoutput-directories"><span class="">Output Directory Layout</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-remotepersistent-li">
  <a href="/remote/persistent/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-remotepersistent"><span class="">Persistent Workers</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-remotecaching-li">
  <a href="/remote/caching/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-remotecaching"><span class="">Remote Caching</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-remoterbe-li">
  <a href="/remote/rbe/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-remoterbe"><span class="">Remote Execution Overview</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-remotesandbox-li">
  <a href="/remote/sandbox/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-remotesandbox"><span class="">Troubleshooting Bazel Remote Execution with Docker Sandbox</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-query-li">
  <a href="/query/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-query"><span class="">Query</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-queryaquery-li">
  <a href="/query/aquery/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-queryaquery"><span class="">Action Graph Query (aquery)</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-querycquery-li">
  <a href="/query/cquery/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-querycquery"><span class="">Configurable Query (cquery)</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-queryguide-li">
  <a href="/query/guide/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-queryguide"><span class="">Query guide</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-queryquickstart-li">
  <a href="/query/quickstart/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-queryquickstart"><span class="">Query quickstart</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-querylanguage-li">
  <a href="/query/language/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-querylanguage"><span class="">The Bazel Query Reference</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-queryimages-li">
  <a href="/query/images/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-queryimages"><span class="">Images</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-advanced-li">
  <a href="/advanced/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-advanced"><span class="">Advanced</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-advancedperformance-li">
  <a href="/advanced/performance/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-advancedperformance"><span class="">Performance</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-advancedperformancebuild-performance-breakdown-li">
  <a href="/advanced/performance/build-performance-breakdown/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-advancedperformancebuild-performance-breakdown"><span class="">Breaking down build performance</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-advancedperformancebuild-performance-metrics-li">
  <a href="/advanced/performance/build-performance-metrics/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-advancedperformancebuild-performance-metrics"><span class="">Extracting build performance metrics</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-advancedperformancejson-trace-profile-li">
  <a href="/advanced/performance/json-trace-profile/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-advancedperformancejson-trace-profile"><span class="">JSON Trace Profile</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-advancedperformanceiteration-speed-li">
  <a href="/advanced/performance/iteration-speed/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-advancedperformanceiteration-speed"><span class="">Optimize Iteration Speed</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-advancedperformancememory-li">
  <a href="/advanced/performance/memory/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-advancedperformancememory"><span class="">Optimize Memory</span></a>
</li>
  </ul>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-install-li">
  <a href="/install/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-install"><span class="">Install</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-installcompletion-li">
  <a href="/install/completion/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-installcompletion"><span class="">Command-Line Completion</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-installcompile-source-li">
  <a href="/install/compile-source/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-installcompile-source"><span class="">Compiling Bazel from Source</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-installdocker-container-li">
  <a href="/install/docker-container/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-installdocker-container"><span class="">Getting Started with Bazel Docker Container</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-installbazelisk-li">
  <a href="/install/bazelisk/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-installbazelisk"><span class="">Installing / Updating Bazel using Bazelisk</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-installos-x-li">
  <a href="/install/os-x/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-installos-x"><span class="">Installing Bazel on macOS</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-installsuse-li">
  <a href="/install/suse/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-installsuse"><span class="">Installing Bazel on openSUSE Tumbleweed &amp; Leap</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-installubuntu-li">
  <a href="/install/ubuntu/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-installubuntu"><span class="">Installing Bazel on Ubuntu</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-installwindows-li">
  <a href="/install/windows/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-installwindows"><span class="">Installing Bazel on Windows</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-installide-li">
  <a href="/install/ide/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-installide"><span class="">Integrating Bazel with IDEs</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-installimages-li">
  <a href="/install/images/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-installimages"><span class="">Images</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-migrate-li">
  <a href="/migrate/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-migrate"><span class="">Migrate</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-migratemaven-li">
  <a href="/migrate/maven/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-migratemaven"><span class="">Migrating from Maven to Bazel</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-migratexcode-li">
  <a href="/migrate/xcode/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-migratexcode"><span class="">Migrating from Xcode to Bazel</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-reference-li">
  <a href="/reference/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-reference"><span class="">Reference</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-referenceflag-cheatsheet-li">
  <a href="/reference/flag-cheatsheet/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-referenceflag-cheatsheet"><span class="">Bazel flag cheat sheet</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-referenceglossary-li">
  <a href="/reference/glossary/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-referenceglossary"><span class="">Bazel Glossary</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-referenceskyframe-li">
  <a href="/reference/skyframe/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-referenceskyframe"><span class="">Skyframe</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-referencetest-encyclopedia-li">
  <a href="/reference/test-encyclopedia/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-referencetest-encyclopedia"><span class="">Test encyclopedia</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-release-li">
  <a href="/release/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-release"><span class="">Release</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-releasebackward-compatibility-li">
  <a href="/release/backward-compatibility/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-releasebackward-compatibility"><span class="">Backward Compatibility</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-releaserolling-li">
  <a href="/release/rolling/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-releaserolling"><span class="">Rolling Releases</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-releaserule-compatibility-li">
  <a href="/release/rule-compatibility/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-releaserule-compatibility"><span class="">Rule Compatibility</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-rules-li">
  <a href="/rules/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-rules"><span class="">Rules</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-rulesbzl-style-li">
  <a href="/rules/bzl-style/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-rulesbzl-style"><span class="">.bzl style guide</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-ruleschallenges-li">
  <a href="/rules/challenges/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-ruleschallenges"><span class="">Challenges of Writing Rules</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-ruleslegacy-macro-tutorial-li">
  <a href="/rules/legacy-macro-tutorial/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-ruleslegacy-macro-tutorial"><span class="">Creating a Legacy Macro</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-rulesmacro-tutorial-li">
  <a href="/rules/macro-tutorial/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-rulesmacro-tutorial"><span class="">Creating a Symbolic Macro</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-rulesdeploying-li">
  <a href="/rules/deploying/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-rulesdeploying"><span class="">Deploying Rules</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-ruleserrors-li">
  <a href="/rules/errors/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-ruleserrors"><span class="">Errors</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-ruleserrorsread-only-variable-li">
  <a href="/rules/errors/read-only-variable/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-ruleserrorsread-only-variable"><span class="">Error: Variable x is read only</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-rulesfaq-li">
  <a href="/rules/faq/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-rulesfaq"><span class="">Frequently Asked Questions</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-rulesperformance-li">
  <a href="/rules/performance/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-rulesperformance"><span class="">Optimizing Performance</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-rulesrules-tutorial-li">
  <a href="/rules/rules-tutorial/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-rulesrules-tutorial"><span class="">Rules Tutorial</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-ruleslanguage-li">
  <a href="/rules/language/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-ruleslanguage"><span class="">Starlark Language</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-rulestesting-li">
  <a href="/rules/testing/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-rulestesting"><span class="">Testing</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-rulesverbs-tutorial-li">
  <a href="/rules/verbs-tutorial/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-rulesverbs-tutorial"><span class="">Using Macros to Create Custom Verbs</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-ruleswindows-li">
  <a href="/rules/windows/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-ruleswindows"><span class="">Writing Rules on Windows</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-run-li">
  <a href="/run/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-run"><span class="">Run</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-runbuild-li">
  <a href="/run/build/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-runbuild"><span class="">Build programs with Bazel</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-runscripts-li">
  <a href="/run/scripts/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-runscripts"><span class="">Calling Bazel from scripts</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-runclient-server-li">
  <a href="/run/client-server/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-runclient-server"><span class="">Client/server implementation</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-runbazelrc-li">
  <a href="/run/bazelrc/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-runbazelrc"><span class="">Write bazelrc configuration files</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-start-li">
  <a href="/start/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-start"><span class="">Start</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-startcpp-li">
  <a href="/start/cpp/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-startcpp"><span class="">Bazel Tutorial: Build a C&#43;&#43; Project</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-startgo-li">
  <a href="/start/go/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-startgo"><span class="">Bazel Tutorial: Build a Go Project</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-startjava-li">
  <a href="/start/java/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-startjava"><span class="">Bazel Tutorial: Build a Java Project</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-startandroid-app-li">
  <a href="/start/android-app/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-startandroid-app"><span class="">Bazel Tutorial: Build an Android App</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-startios-app-li">
  <a href="/start/ios-app/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-startios-app"><span class="">Bazel Tutorial: Build an iOS App</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docs-li">
  <a href="/docs/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-docs"><span class="">Using Bazel</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbazel-and-android-li">
  <a href="/docs/bazel-and-android/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsbazel-and-android"><span class="">Android and Bazel</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsandroid-build-performance-li">
  <a href="/docs/android-build-performance/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsandroid-build-performance"><span class="">Android Build Performance</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsandroid-instrumentation-test-li">
  <a href="/docs/android-instrumentation-test/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsandroid-instrumentation-test"><span class="">Android Instrumentation Tests</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbazel-and-apple-li">
  <a href="/docs/bazel-and-apple/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsbazel-and-apple"><span class="">Apple Apps and Bazel</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsmobile-install-li">
  <a href="/docs/mobile-install/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsmobile-install"><span class="">bazel mobile-install</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbazel-and-cpp-li">
  <a href="/docs/bazel-and-cpp/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsbazel-and-cpp"><span class="">C&#43;&#43; and Bazel</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docscc-toolchain-config-reference-li">
  <a href="/docs/cc-toolchain-config-reference/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docscc-toolchain-config-reference"><span class="">C&#43;&#43; Toolchain Configuration</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsuser-manual-li">
  <a href="/docs/user-manual/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsuser-manual"><span class="">Commands and Options</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-docsconfigurable-attributes-li">
  <a href="/docs/configurable-attributes/" class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id="m-docsconfigurable-attributes"><span class="td-sidebar-nav-active-item">Configurable Build Attributes</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbazel-and-java-li">
  <a href="/docs/bazel-and-java/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsbazel-and-java"><span class="">Java and Bazel</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbazel-and-javascript-li">
  <a href="/docs/bazel-and-javascript/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsbazel-and-javascript"><span class="">JavaScript and Bazel</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docssandboxing-li">
  <a href="/docs/sandboxing/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docssandboxing"><span class="">Sandboxing</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsandroid-ndk-li">
  <a href="/docs/android-ndk/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsandroid-ndk"><span class="">Using the Android Native Development Kit with Bazel</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsimages-li">
  <a href="/docs/images/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-docsimages"><span class="">Images</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-brand-li">
  <a href="/brand/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-brand"><span class="">Brand</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-images-li">
  <a href="/images/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-images"><span class="">Images</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-versions-li">
  <a href="/versions/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-versions"><span class="">Versions</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-community-li">
  <a href="/community/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-community"><span class="">Community &amp; Product Partners</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-communityroadmaps-configurability-li">
  <a href="/community/roadmaps-configurability/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-communityroadmaps-configurability"><span class="">Bazel Configurability 2021 Roadmap</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-communitysig-li">
  <a href="/community/sig/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-communitysig"><span class="">Bazel Special Interest Groups</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-communityupdate-li">
  <a href="/community/update/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-communityupdate"><span class="">Community updates</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-communityrecommended-rules-li">
  <a href="/community/recommended-rules/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-communityrecommended-rules"><span class="">Recommended Rules</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-communityremote-execution-services-li">
  <a href="/community/remote-execution-services/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-communityremote-execution-services"><span class="">Remote Execution Services</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-communityroadmaps-starlark-li">
  <a href="/community/roadmaps-starlark/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-communityroadmaps-starlark"><span class="">Starlark Roadmap</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-communityusers-li">
  <a href="/community/users/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-communityusers"><span class="">Who&#39;s Using Bazel</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-communityexperts-li">
  <a href="/community/experts/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-communityexperts"><span class="">Experts</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-communityimages-li">
  <a href="/community/images/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-communityimages"><span class="">Images</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-communitypartners-li">
  <a href="/community/partners/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-communitypartners"><span class="">Partners</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-contribute-li">
  <a href="/contribute/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-contribute"><span class="">Contribute</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-contributestatemachine-guide-li">
  <a href="/contribute/statemachine-guide/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-contributestatemachine-guide"><span class="">A Guide to Skyframe `StateMachine`s</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-contributedocs-style-guide-li">
  <a href="/contribute/docs-style-guide/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-contributedocs-style-guide"><span class="">Bazel docs style guide</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-contributedocs-li">
  <a href="/contribute/docs/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-contributedocs"><span class="">Contribute to Bazel documentation</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-contributepolicy-li">
  <a href="/contribute/policy/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-contributepolicy"><span class="">Contribution policy</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-contributedesign-documents-li">
  <a href="/contribute/design-documents/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-contributedesign-documents"><span class="">Design Documents</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-contributemaintainers-guide-li">
  <a href="/contribute/maintainers-guide/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-contributemaintainers-guide"><span class="">Guide for Bazel Maintainers</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-contributebreaking-changes-li">
  <a href="/contribute/breaking-changes/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-contributebreaking-changes"><span class="">Guide for rolling out breaking changes</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-contributewindows-chocolatey-maintenance-li">
  <a href="/contribute/windows-chocolatey-maintenance/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-contributewindows-chocolatey-maintenance"><span class="">Maintaining Bazel Chocolatey package on Windows</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-contributewindows-scoop-maintenance-li">
  <a href="/contribute/windows-scoop-maintenance/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-contributewindows-scoop-maintenance"><span class="">Maintaining Bazel Scoop package on Windows</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-contributenaming-li">
  <a href="/contribute/naming/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-contributenaming"><span class="">Naming a Bazel related project</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-contributepatch-acceptance-li">
  <a href="/contribute/patch-acceptance/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-contributepatch-acceptance"><span class="">Patch Acceptance Process</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-contributesearch-li">
  <a href="/contribute/search/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-contributesearch"><span class="">Searching the codebase</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-contributecodebase-li">
  <a href="/contribute/codebase/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-contributecodebase"><span class="">The Bazel codebase</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-contributerelease-notes-li">
  <a href="/contribute/release-notes/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-contributerelease-notes"><span class="">Writing release notes</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-contributeimages-li">
  <a href="/contribute/images/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-contributeimages"><span class="">Images</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-about-li">
  <a href="/about/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-about"><span class="">About</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-aboutroadmap-li">
  <a href="/about/roadmap/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-aboutroadmap"><span class="">Bazel roadmap</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-aboutvision-li">
  <a href="/about/vision/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-aboutvision"><span class="">Bazel Vision</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-aboutfaq-li">
  <a href="/about/faq/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-aboutfaq"><span class="">FAQ</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-aboutintro-li">
  <a href="/about/intro/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-aboutintro"><span class="">Intro to Bazel</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-aboutwhy-li">
  <a href="/about/why/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-aboutwhy"><span class="">Why Bazel?</span></a>
</li>
  </ul>
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            <div class="td-page-meta ms-2 pb-1 pt-2 mb-0">
<a href="https://github.com/bazelbuild/bazel/tree/master/site/en/content/docs/configurable-attributes.md" class="td-page-meta--view td-page-meta__view" target="_blank" rel="noopener"><i class="fa-solid fa-file-lines fa-fw"></i> View page source</a>
  <a href="https://github.com/bazelbuild/bazel/edit/master/site/en/content/docs/configurable-attributes.md" class="td-page-meta--edit td-page-meta__edit" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
  <a href="https://github.com/bazelbuild/bazel/new/master/site/en/content/docs?filename=change-me.md&amp;value=---%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0Aweight%3A&#43;100%0Adescription%3A&#43;%3E-%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0A---%0A%0A%23%23&#43;Heading%0A%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0A%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0A" class="td-page-meta--child td-page-meta__child" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Create child page</a>
  <a href="https://github.com/bazelbuild/bazel/issues/new?title=Configurable%20Build%20Attributes" class="td-page-meta--issue td-page-meta__issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> Create documentation issue</a>
  
</div>

            <div class="td-toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#example">Example</a></li>
    <li><a href="#select-and-dependencies"><code>select()</code> and dependencies</a></li>
    <li><a href="#configuration-conditions">Configuration conditions</a>
      <ul>
        <li><a href="#built-in-flags">Built-in flags</a></li>
        <li><a href="#custom-flags">Custom flags</a></li>
      </ul>
    </li>
    <li><a href="#the-default-condition">The default condition</a></li>
    <li><a href="#platforms">Platforms</a></li>
    <li><a href="#combining-selects">Combining <code>select()</code>s</a></li>
    <li><a href="#or-chaining">OR chaining</a>
      <ul>
        <li><a href="#selectswith_or"><code>selects.with_or</code></a></li>
        <li><a href="#selectsconfig_setting_group"><code>selects.config_setting_group</code></a></li>
      </ul>
    </li>
    <li><a href="#and-chaining">AND chaining</a></li>
    <li><a href="#custom-error-messages">Custom error messages</a></li>
    <li><a href="#rules-compatibility">Rules compatibility</a></li>
    <li><a href="#bazel-query-and-cquery">Bazel query and cquery</a></li>
    <li><a href="#faq">FAQ</a>
      <ul>
        <li><a href="#why-doesnt-select-work-in-macros">Why doesn&rsquo;t select() work in macros?</a></li>
        <li><a href="#why-does-select-always-return-true">Why does select() always return true?</a></li>
        <li><a href="#can-i-read-select-like-a-dict">Can I read select() like a dict?</a></li>
        <li><a href="#why-doesnt-select-work-with-bind">Why doesn&rsquo;t select() work with bind()?</a></li>
        <li><a href="#why-doesnt-my-select-choose-what-i-expect">Why doesn&rsquo;t my select() choose what I expect?</a></li>
        <li><a href="#why-doesnt-select-work-with-platforms">Why doesn&rsquo;t <code>select()</code> work with platforms?</a></li>
      </ul>
    </li>
  </ul>
</nav>
      </div>
    
            
	
          </aside>
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="/docs/">Using Bazel</a></li>
  <li class="breadcrumb-item active" aria-current="page">
    Configurable Build Attributes</li>
  </ol>
</nav>
<div class="td-content">
	<h1>Configurable Build Attributes</h1>
	
	<header class="article-meta">
		
  </header>
	<p><strong><em>Configurable attributes</em></strong>, commonly known as <a href="/reference/be/functions#select/"><code>select()</code></a>, is a Bazel feature that lets users toggle the values
of build rule attributes at the command line.</p>
<p>This can be used, for example, for a multiplatform library that automatically
chooses the appropriate implementation for the architecture, or for a
feature-configurable binary that can be customized at build time.</p>
<h2 id="example">Example</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl"># myapp/BUILD
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cc_binary(
</span></span><span class="line"><span class="cl">    name = &#34;mybinary&#34;,
</span></span><span class="line"><span class="cl">    srcs = [&#34;main.cc&#34;],
</span></span><span class="line"><span class="cl">    deps = select({
</span></span><span class="line"><span class="cl">        &#34;:arm_build&#34;: [&#34;:arm_lib&#34;],
</span></span><span class="line"><span class="cl">        &#34;:x86_debug_build&#34;: [&#34;:x86_dev_lib&#34;],
</span></span><span class="line"><span class="cl">        &#34;//conditions:default&#34;: [&#34;:generic_lib&#34;],
</span></span><span class="line"><span class="cl">    }),
</span></span><span class="line"><span class="cl">)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">config_setting(
</span></span><span class="line"><span class="cl">    name = &#34;arm_build&#34;,
</span></span><span class="line"><span class="cl">    values = {&#34;cpu&#34;: &#34;arm&#34;},
</span></span><span class="line"><span class="cl">)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">config_setting(
</span></span><span class="line"><span class="cl">    name = &#34;x86_debug_build&#34;,
</span></span><span class="line"><span class="cl">    values = {
</span></span><span class="line"><span class="cl">        &#34;cpu&#34;: &#34;x86&#34;,
</span></span><span class="line"><span class="cl">        &#34;compilation_mode&#34;: &#34;dbg&#34;,
</span></span><span class="line"><span class="cl">    },
</span></span><span class="line"><span class="cl">)
</span></span></code></pre></div><p>This declares a <code>cc_binary</code> that &ldquo;chooses&rdquo; its deps based on the flags at the
command line. Specifically, <code>deps</code> becomes:</p>
<table>
  <tr style="background: #E9E9E9; font-weight: bold">
    <td>Command</td>
    <td>deps =</td>
  </tr>
  <tr>
    <td><code>bazel build //myapp:mybinary --cpu=arm</code></td>
    <td><code>[":arm_lib"]</code></td>
  </tr>
  <tr>
    <td><code>bazel build //myapp:mybinary -c dbg --cpu=x86</code></td>
    <td><code>[":x86_dev_lib"]</code></td>
  </tr>
  <tr>
    <td><code>bazel build //myapp:mybinary --cpu=ppc</code></td>
    <td><code>[":generic_lib"]</code></td>
  </tr>
  <tr>
    <td><code>bazel build //myapp:mybinary -c dbg --cpu=ppc</code></td>
    <td><code>[":generic_lib"]</code></td>
  </tr>
</table>
<p><code>select()</code> serves as a placeholder for a value that will be chosen based on
<em>configuration conditions</em>, which are labels referencing <a href="/reference/be/general#config_setting/"><code>config_setting</code></a>
targets. By using <code>select()</code> in a configurable attribute, the attribute
effectively adopts different values when different conditions hold.</p>
<p>Matches must be unambiguous: if multiple conditions match then either:</p>
<ul>
<li>They all resolve to the same value. For example, when running on linux x86, this is unambiguous
<code>{&quot;@platforms//os:linux&quot;: &quot;Hello&quot;, &quot;@platforms//cpu:x86_64&quot;: &quot;Hello&quot;}</code> because both branches resolve to &ldquo;hello&rdquo;.</li>
<li>One&rsquo;s <code>values</code> is a strict superset of all others&rsquo;. For example, <code>values = {&quot;cpu&quot;: &quot;x86&quot;, &quot;compilation_mode&quot;: &quot;dbg&quot;}</code>
is an unambiguous specialization of <code>values = {&quot;cpu&quot;: &quot;x86&quot;}</code>.</li>
</ul>
<p>The built-in condition <a href="#default-condition"><code>//conditions:default</code></a> automatically matches when
nothing else does.</p>
<p>While this example uses <code>deps</code>, <code>select()</code> works just as well on <code>srcs</code>,
<code>resources</code>, <code>cmd</code>, and most other attributes. Only a small number of attributes
are <em>non-configurable</em>, and these are clearly annotated. For example,
<code>config_setting</code>&rsquo;s own
<a href="/reference/be/general#config_setting.values"><code>values</code></a> attribute is non-configurable.</p>
<h2 id="select-and-dependencies"><code>select()</code> and dependencies</h2>
<p>Certain attributes change the build parameters for all transitive dependencies
under a target. For example, <code>genrule</code>&rsquo;s <code>tools</code> changes <code>--cpu</code> to the CPU of
the machine running Bazel (which, thanks to cross-compilation, may be different
than the CPU the target is built for). This is known as a
<a href="/reference/glossary#transition/">configuration transition</a>.</p>
<p>Given</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">#myapp/BUILD
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">config_setting(
</span></span><span class="line"><span class="cl">    name = &#34;arm_cpu&#34;,
</span></span><span class="line"><span class="cl">    values = {&#34;cpu&#34;: &#34;arm&#34;},
</span></span><span class="line"><span class="cl">)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">config_setting(
</span></span><span class="line"><span class="cl">    name = &#34;x86_cpu&#34;,
</span></span><span class="line"><span class="cl">    values = {&#34;cpu&#34;: &#34;x86&#34;},
</span></span><span class="line"><span class="cl">)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">genrule(
</span></span><span class="line"><span class="cl">    name = &#34;my_genrule&#34;,
</span></span><span class="line"><span class="cl">    srcs = select({
</span></span><span class="line"><span class="cl">        &#34;:arm_cpu&#34;: [&#34;g_arm.src&#34;],
</span></span><span class="line"><span class="cl">        &#34;:x86_cpu&#34;: [&#34;g_x86.src&#34;],
</span></span><span class="line"><span class="cl">    }),
</span></span><span class="line"><span class="cl">    tools = select({
</span></span><span class="line"><span class="cl">        &#34;:arm_cpu&#34;: [&#34;:tool1&#34;],
</span></span><span class="line"><span class="cl">        &#34;:x86_cpu&#34;: [&#34;:tool2&#34;],
</span></span><span class="line"><span class="cl">    }),
</span></span><span class="line"><span class="cl">)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cc_binary(
</span></span><span class="line"><span class="cl">    name = &#34;tool1&#34;,
</span></span><span class="line"><span class="cl">    srcs = select({
</span></span><span class="line"><span class="cl">        &#34;:arm_cpu&#34;: [&#34;armtool.cc&#34;],
</span></span><span class="line"><span class="cl">        &#34;:x86_cpu&#34;: [&#34;x86tool.cc&#34;],
</span></span><span class="line"><span class="cl">    }),
</span></span><span class="line"><span class="cl">)
</span></span></code></pre></div><p>running</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ bazel build //myapp:my_genrule --cpu<span class="o">=</span>arm
</span></span></code></pre></div><p>on an <code>x86</code> developer machine binds the build to <code>g_arm.src</code>, <code>tool1</code>, and
<code>x86tool.cc</code>. Both of the <code>select</code>s attached to <code>my_genrule</code> use <code>my_genrule</code>&rsquo;s
build parameters, which include <code>--cpu=arm</code>. The <code>tools</code> attribute changes
<code>--cpu</code> to <code>x86</code> for <code>tool1</code> and its transitive dependencies. The <code>select</code> on
<code>tool1</code> uses <code>tool1</code>&rsquo;s build parameters, which include <code>--cpu=x86</code>.</p>
<h2 id="configuration-conditions">Configuration conditions</h2>
<p>Each key in a configurable attribute is a label reference to a
<a href="/reference/be/general#config_setting/"><code>config_setting</code></a> or
<a href="/reference/be/platforms-and-toolchains#constraint_value/"><code>constraint_value</code></a>.</p>
<p><code>config_setting</code> is just a collection of
expected command line flag settings. By encapsulating these in a target, it&rsquo;s
easy to maintain &ldquo;standard&rdquo; conditions users can reference from multiple places.</p>
<p><code>constraint_value</code> provides support for <a href="#platforms">multi-platform behavior</a>.</p>
<h3 id="built-in-flags">Built-in flags</h3>
<p>Flags like <code>--cpu</code> are built into Bazel: the build tool natively understands
them for all builds in all projects. These are specified with
<a href="/reference/be/general#config_setting/"><code>config_setting</code></a>&rsquo;s
<a href="/reference/be/general#config_setting.values"><code>values</code></a> attribute:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">config_setting(
</span></span><span class="line"><span class="cl">    name = &#34;meaningful_condition_name&#34;,
</span></span><span class="line"><span class="cl">    values = {
</span></span><span class="line"><span class="cl">        &#34;flag1&#34;: &#34;value1&#34;,
</span></span><span class="line"><span class="cl">        &#34;flag2&#34;: &#34;value2&#34;,
</span></span><span class="line"><span class="cl">        ...
</span></span><span class="line"><span class="cl">    },
</span></span><span class="line"><span class="cl">)
</span></span></code></pre></div><p><code>flagN</code> is a flag name (without <code>--</code>, so <code>&quot;cpu&quot;</code> instead of <code>&quot;--cpu&quot;</code>). <code>valueN</code>
is the expected value for that flag. <code>:meaningful_condition_name</code> matches if
<em>every</em> entry in <code>values</code> matches. Order is irrelevant.</p>
<p><code>valueN</code> is parsed as if it was set on the command line. This means:</p>
<ul>
<li><code>values = { &quot;compilation_mode&quot;: &quot;opt&quot; }</code> matches <code>bazel build -c opt</code></li>
<li><code>values = { &quot;force_pic&quot;: &quot;true&quot; }</code> matches <code>bazel build --force_pic=1</code></li>
<li><code>values = { &quot;force_pic&quot;: &quot;0&quot; }</code> matches <code>bazel build --noforce_pic</code></li>
</ul>
<p><code>config_setting</code> only supports flags that affect target behavior. For example,
<a href="/docs/user-manual#show-progress/"><code>--show_progress</code></a> isn&rsquo;t allowed because
it only affects how Bazel reports progress to the user. Targets can&rsquo;t use that
flag to construct their results. The exact set of supported flags isn&rsquo;t
documented. In practice, most flags that &ldquo;make sense&rdquo; work.</p>
<h3 id="custom-flags">Custom flags</h3>
<p>You can model your own project-specific flags with
<a href="/extending/config#user-defined-build-settings">Starlark build settings</a>. Unlike built-in flags, these are
defined as build targets, so Bazel references them with target labels.</p>
<p>These are triggered with <a href="/reference/be/general#config_setting/"><code>config_setting</code></a>&rsquo;s
<a href="/reference/be/general#config_setting.flag_values"><code>flag_values</code></a>
attribute:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">config_setting(
</span></span><span class="line"><span class="cl">    name = &#34;meaningful_condition_name&#34;,
</span></span><span class="line"><span class="cl">    flag_values = {
</span></span><span class="line"><span class="cl">        &#34;//myflags:flag1&#34;: &#34;value1&#34;,
</span></span><span class="line"><span class="cl">        &#34;//myflags:flag2&#34;: &#34;value2&#34;,
</span></span><span class="line"><span class="cl">        ...
</span></span><span class="line"><span class="cl">    },
</span></span><span class="line"><span class="cl">)
</span></span></code></pre></div><p>Behavior is the same as for <a href="#built-in-flags">built-in flags</a>. See <a href="https://github.com/bazelbuild/examples/tree/HEAD/configurations/select_on_build_setting">here</a>
for a working example.</p>
<p><a href="/reference/command-line-reference#flag--define/"><code>--define</code></a>
is an alternative legacy syntax for custom flags (for example
<code>--define foo=bar</code>). This can be expressed either in the
<a href="/reference/be/general#config_setting.values">values</a> attribute
(<code>values = {&quot;define&quot;: &quot;foo=bar&quot;}</code>) or the
<a href="/reference/be/general#config_setting.define_values">define_values</a> attribute
(<code>define_values = {&quot;foo&quot;: &quot;bar&quot;}</code>). <code>--define</code> is only supported for backwards
compatibility. Prefer Starlark build settings whenever possible.</p>
<p><code>values</code>, <code>flag_values</code>, and <code>define_values</code> evaluate independently. The
<code>config_setting</code> matches if all values across all of them match.</p>
<h2 id="the-default-condition">The default condition</h2>
<p>The built-in condition <code>//conditions:default</code> matches when no other condition
matches.</p>
<p>Because of the &ldquo;exactly one match&rdquo; rule, a configurable attribute with no match
and no default condition emits a <code>&quot;no matching conditions&quot;</code> error. This can
protect against silent failures from unexpected settings:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># myapp/BUILD
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">config_setting(
</span></span><span class="line"><span class="cl">    name = &#34;x86_cpu&#34;,
</span></span><span class="line"><span class="cl">    values = {&#34;cpu&#34;: &#34;x86&#34;},
</span></span><span class="line"><span class="cl">)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cc_library(
</span></span><span class="line"><span class="cl">    name = &#34;x86_only_lib&#34;,
</span></span><span class="line"><span class="cl">    srcs = select({
</span></span><span class="line"><span class="cl">        &#34;:x86_cpu&#34;: [&#34;lib.cc&#34;],
</span></span><span class="line"><span class="cl">    }),
</span></span><span class="line"><span class="cl">)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ bazel build //myapp:x86_only_lib --cpu<span class="o">=</span>arm
</span></span><span class="line"><span class="cl">ERROR: Configurable attribute <span class="s2">&#34;srcs&#34;</span> doesn<span class="err">&#39;</span>t match this configuration <span class="o">(</span>would
</span></span><span class="line"><span class="cl">a default condition help?<span class="o">)</span>.
</span></span><span class="line"><span class="cl">Conditions checked:
</span></span><span class="line"><span class="cl">  //myapp:x86_cpu
</span></span></code></pre></div><p>For even clearer errors, you can set custom messages with <code>select()</code>&rsquo;s
<a href="#custom-error-messages"><code>no_match_error</code></a> attribute.</p>
<h2 id="platforms">Platforms</h2>
<p>While the ability to specify multiple flags on the command line provides
flexibility, it can also be burdensome to individually set each one every time
you want to build a target.
<a href="/extending/platforms/">Platforms</a>
let you consolidate these into simple bundles.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl"># myapp/BUILD
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sh_binary(
</span></span><span class="line"><span class="cl">    name = &#34;my_rocks&#34;,
</span></span><span class="line"><span class="cl">    srcs = select({
</span></span><span class="line"><span class="cl">        &#34;:basalt&#34;: [&#34;pyroxene.sh&#34;],
</span></span><span class="line"><span class="cl">        &#34;:marble&#34;: [&#34;calcite.sh&#34;],
</span></span><span class="line"><span class="cl">        &#34;//conditions:default&#34;: [&#34;feldspar.sh&#34;],
</span></span><span class="line"><span class="cl">    }),
</span></span><span class="line"><span class="cl">)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">config_setting(
</span></span><span class="line"><span class="cl">    name = &#34;basalt&#34;,
</span></span><span class="line"><span class="cl">    constraint_values = [
</span></span><span class="line"><span class="cl">        &#34;:black&#34;,
</span></span><span class="line"><span class="cl">        &#34;:igneous&#34;,
</span></span><span class="line"><span class="cl">    ],
</span></span><span class="line"><span class="cl">)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">config_setting(
</span></span><span class="line"><span class="cl">    name = &#34;marble&#34;,
</span></span><span class="line"><span class="cl">    constraint_values = [
</span></span><span class="line"><span class="cl">        &#34;:white&#34;,
</span></span><span class="line"><span class="cl">        &#34;:metamorphic&#34;,
</span></span><span class="line"><span class="cl">    ],
</span></span><span class="line"><span class="cl">)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># constraint_setting acts as an enum type, and constraint_value as an enum value.
</span></span><span class="line"><span class="cl">constraint_setting(name = &#34;color&#34;)
</span></span><span class="line"><span class="cl">constraint_value(name = &#34;black&#34;, constraint_setting = &#34;color&#34;)
</span></span><span class="line"><span class="cl">constraint_value(name = &#34;white&#34;, constraint_setting = &#34;color&#34;)
</span></span><span class="line"><span class="cl">constraint_setting(name = &#34;texture&#34;)
</span></span><span class="line"><span class="cl">constraint_value(name = &#34;smooth&#34;, constraint_setting = &#34;texture&#34;)
</span></span><span class="line"><span class="cl">constraint_setting(name = &#34;type&#34;)
</span></span><span class="line"><span class="cl">constraint_value(name = &#34;igneous&#34;, constraint_setting = &#34;type&#34;)
</span></span><span class="line"><span class="cl">constraint_value(name = &#34;metamorphic&#34;, constraint_setting = &#34;type&#34;)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">platform(
</span></span><span class="line"><span class="cl">    name = &#34;basalt_platform&#34;,
</span></span><span class="line"><span class="cl">    constraint_values = [
</span></span><span class="line"><span class="cl">        &#34;:black&#34;,
</span></span><span class="line"><span class="cl">        &#34;:igneous&#34;,
</span></span><span class="line"><span class="cl">    ],
</span></span><span class="line"><span class="cl">)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">platform(
</span></span><span class="line"><span class="cl">    name = &#34;marble_platform&#34;,
</span></span><span class="line"><span class="cl">    constraint_values = [
</span></span><span class="line"><span class="cl">        &#34;:white&#34;,
</span></span><span class="line"><span class="cl">        &#34;:smooth&#34;,
</span></span><span class="line"><span class="cl">        &#34;:metamorphic&#34;,
</span></span><span class="line"><span class="cl">    ],
</span></span><span class="line"><span class="cl">)
</span></span></code></pre></div><p>The platform can be specified on the command line. It activates the
<code>config_setting</code>s that contain a subset of the platform&rsquo;s <code>constraint_values</code>,
allowing those <code>config_setting</code>s to match in <code>select()</code> expressions.</p>
<p>For example, in order to set the <code>srcs</code> attribute of <code>my_rocks</code> to <code>calcite.sh</code>,
you can simply run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">bazel build //my_app:my_rocks --platforms=//myapp:marble_platform
</span></span></code></pre></div><p>Without platforms, this might look something like</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">bazel build //my_app:my_rocks --define color=white --define texture=smooth --define type=metamorphic
</span></span></code></pre></div><p><code>select()</code> can also directly read <code>constraint_value</code>s:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">constraint_setting(name = &#34;type&#34;)
</span></span><span class="line"><span class="cl">constraint_value(name = &#34;igneous&#34;, constraint_setting = &#34;type&#34;)
</span></span><span class="line"><span class="cl">constraint_value(name = &#34;metamorphic&#34;, constraint_setting = &#34;type&#34;)
</span></span><span class="line"><span class="cl">sh_binary(
</span></span><span class="line"><span class="cl">    name = &#34;my_rocks&#34;,
</span></span><span class="line"><span class="cl">    srcs = select({
</span></span><span class="line"><span class="cl">        &#34;:igneous&#34;: [&#34;igneous.sh&#34;],
</span></span><span class="line"><span class="cl">        &#34;:metamorphic&#34; [&#34;metamorphic.sh&#34;],
</span></span><span class="line"><span class="cl">    }),
</span></span><span class="line"><span class="cl">)
</span></span></code></pre></div><p>This saves the need for boilerplate <code>config_setting</code>s when you only need to
check against single values.</p>
<p>Platforms are still under development. See the
<a href="/concepts/platforms/">documentation</a> for details.</p>
<h2 id="combining-selects">Combining <code>select()</code>s</h2>
<p><code>select</code> can appear multiple times in the same attribute:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">sh_binary(
</span></span><span class="line"><span class="cl">    name = &#34;my_target&#34;,
</span></span><span class="line"><span class="cl">    srcs = [&#34;always_include.sh&#34;] +
</span></span><span class="line"><span class="cl">           select({
</span></span><span class="line"><span class="cl">               &#34;:armeabi_mode&#34;: [&#34;armeabi_src.sh&#34;],
</span></span><span class="line"><span class="cl">               &#34;:x86_mode&#34;: [&#34;x86_src.sh&#34;],
</span></span><span class="line"><span class="cl">           }) +
</span></span><span class="line"><span class="cl">           select({
</span></span><span class="line"><span class="cl">               &#34;:opt_mode&#34;: [&#34;opt_extras.sh&#34;],
</span></span><span class="line"><span class="cl">               &#34;:dbg_mode&#34;: [&#34;dbg_extras.sh&#34;],
</span></span><span class="line"><span class="cl">           }),
</span></span><span class="line"><span class="cl">)
</span></span></code></pre></div><p>Note: Some restrictions apply on what can be combined in the <code>select</code>s values:</p>
<ul>
<li>Duplicate labels can appear in different paths of the same <code>select</code>.</li>
<li>Duplicate labels can <em>not</em> appear within the same path of a <code>select</code>.</li>
<li>Duplicate labels can <em>not</em> appear across multiple combined <code>select</code>s (no matter what path)</li>
</ul>
<p><code>select</code> cannot appear inside another <code>select</code>. If you need to nest <code>selects</code>
and your attribute takes other targets as values, use an intermediate target:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">sh_binary(
</span></span><span class="line"><span class="cl">    name = &#34;my_target&#34;,
</span></span><span class="line"><span class="cl">    srcs = [&#34;always_include.sh&#34;],
</span></span><span class="line"><span class="cl">    deps = select({
</span></span><span class="line"><span class="cl">        &#34;:armeabi_mode&#34;: [&#34;:armeabi_lib&#34;],
</span></span><span class="line"><span class="cl">        ...
</span></span><span class="line"><span class="cl">    }),
</span></span><span class="line"><span class="cl">)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sh_library(
</span></span><span class="line"><span class="cl">    name = &#34;armeabi_lib&#34;,
</span></span><span class="line"><span class="cl">    srcs = select({
</span></span><span class="line"><span class="cl">        &#34;:opt_mode&#34;: [&#34;armeabi_with_opt.sh&#34;],
</span></span><span class="line"><span class="cl">        ...
</span></span><span class="line"><span class="cl">    }),
</span></span><span class="line"><span class="cl">)
</span></span></code></pre></div><p>If you need a <code>select</code> to match when multiple conditions match, consider <a href="#and-chaining">AND
chaining</a>.</p>
<h2 id="or-chaining">OR chaining</h2>
<p>Consider the following:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">sh_binary(
</span></span><span class="line"><span class="cl">    name = &#34;my_target&#34;,
</span></span><span class="line"><span class="cl">    srcs = [&#34;always_include.sh&#34;],
</span></span><span class="line"><span class="cl">    deps = select({
</span></span><span class="line"><span class="cl">        &#34;:config1&#34;: [&#34;:standard_lib&#34;],
</span></span><span class="line"><span class="cl">        &#34;:config2&#34;: [&#34;:standard_lib&#34;],
</span></span><span class="line"><span class="cl">        &#34;:config3&#34;: [&#34;:standard_lib&#34;],
</span></span><span class="line"><span class="cl">        &#34;:config4&#34;: [&#34;:special_lib&#34;],
</span></span><span class="line"><span class="cl">    }),
</span></span><span class="line"><span class="cl">)
</span></span></code></pre></div><p>Most conditions evaluate to the same dep. But this syntax is hard to read and
maintain. It would be nice to not have to repeat <code>[&quot;:standard_lib&quot;]</code> multiple
times.</p>
<p>One option is to predefine the value as a BUILD variable:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">STANDARD_DEP = [&#34;:standard_lib&#34;]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sh_binary(
</span></span><span class="line"><span class="cl">    name = &#34;my_target&#34;,
</span></span><span class="line"><span class="cl">    srcs = [&#34;always_include.sh&#34;],
</span></span><span class="line"><span class="cl">    deps = select({
</span></span><span class="line"><span class="cl">        &#34;:config1&#34;: STANDARD_DEP,
</span></span><span class="line"><span class="cl">        &#34;:config2&#34;: STANDARD_DEP,
</span></span><span class="line"><span class="cl">        &#34;:config3&#34;: STANDARD_DEP,
</span></span><span class="line"><span class="cl">        &#34;:config4&#34;: [&#34;:special_lib&#34;],
</span></span><span class="line"><span class="cl">    }),
</span></span><span class="line"><span class="cl">)
</span></span></code></pre></div><p>This makes it easier to manage the dependency. But it still causes unnecessary
duplication.</p>
<p>For more direct support, use one of the following:</p>
<h3 id="selectswith_or"><code>selects.with_or</code></h3>
<p>The
<a href="https://github.com/bazelbuild/bazel-skylib/blob/main/docs/selects_doc.md#selectswith_or">with_or</a>
macro in <a href="https://github.com/bazelbuild/bazel-skylib">Skylib</a>&rsquo;s
<a href="https://github.com/bazelbuild/bazel-skylib/blob/main/docs/selects_doc.md"><code>selects</code></a>
module supports <code>OR</code>ing conditions directly inside a <code>select</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="nb">load</span><span class="p">(</span><span class="s2">&#34;@bazel_skylib//lib:selects.bzl&#34;</span><span class="p">,</span> <span class="s2">&#34;selects&#34;</span><span class="p">)</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">sh_binary(
</span></span><span class="line"><span class="cl">    name = &#34;my_target&#34;,
</span></span><span class="line"><span class="cl">    srcs = [&#34;always_include.sh&#34;],
</span></span><span class="line"><span class="cl">    deps = selects.with_or({
</span></span><span class="line"><span class="cl">        (&#34;:config1&#34;, &#34;:config2&#34;, &#34;:config3&#34;): [&#34;:standard_lib&#34;],
</span></span><span class="line"><span class="cl">        &#34;:config4&#34;: [&#34;:special_lib&#34;],
</span></span><span class="line"><span class="cl">    }),
</span></span><span class="line"><span class="cl">)
</span></span></code></pre></div><h3 id="selectsconfig_setting_group"><code>selects.config_setting_group</code></h3>
<p>The
<a href="https://github.com/bazelbuild/bazel-skylib/blob/main/docs/selects_doc.md#selectsconfig_setting_group">config_setting_group</a>
macro in <a href="https://github.com/bazelbuild/bazel-skylib">Skylib</a>&rsquo;s
<a href="https://github.com/bazelbuild/bazel-skylib/blob/main/docs/selects_doc.md"><code>selects</code></a>
module supports <code>OR</code>ing multiple <code>config_setting</code>s:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="nb">load</span><span class="p">(</span><span class="s2">&#34;@bazel_skylib//lib:selects.bzl&#34;</span><span class="p">,</span> <span class="s2">&#34;selects&#34;</span><span class="p">)</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">config_setting(
</span></span><span class="line"><span class="cl">    name = &#34;config1&#34;,
</span></span><span class="line"><span class="cl">    values = {&#34;cpu&#34;: &#34;arm&#34;},
</span></span><span class="line"><span class="cl">)
</span></span><span class="line"><span class="cl">config_setting(
</span></span><span class="line"><span class="cl">    name = &#34;config2&#34;,
</span></span><span class="line"><span class="cl">    values = {&#34;compilation_mode&#34;: &#34;dbg&#34;},
</span></span><span class="line"><span class="cl">)
</span></span><span class="line"><span class="cl">selects.config_setting_group(
</span></span><span class="line"><span class="cl">    name = &#34;config1_or_2&#34;,
</span></span><span class="line"><span class="cl">    match_any = [&#34;:config1&#34;, &#34;:config2&#34;],
</span></span><span class="line"><span class="cl">)
</span></span><span class="line"><span class="cl">sh_binary(
</span></span><span class="line"><span class="cl">    name = &#34;my_target&#34;,
</span></span><span class="line"><span class="cl">    srcs = [&#34;always_include.sh&#34;],
</span></span><span class="line"><span class="cl">    deps = select({
</span></span><span class="line"><span class="cl">        &#34;:config1_or_2&#34;: [&#34;:standard_lib&#34;],
</span></span><span class="line"><span class="cl">        &#34;//conditions:default&#34;: [&#34;:other_lib&#34;],
</span></span><span class="line"><span class="cl">    }),
</span></span><span class="line"><span class="cl">)
</span></span></code></pre></div><p>Unlike <code>selects.with_or</code>, different targets can share <code>:config1_or_2</code> across
different attributes.</p>
<p>It&rsquo;s an error for multiple conditions to match unless one is an unambiguous
&ldquo;specialization&rdquo; of the others or they all resolve to the same value. See <a href="#configurable-build-example">here</a> for details.</p>
<h2 id="and-chaining">AND chaining</h2>
<p>If you need a <code>select</code> branch to match when multiple conditions match, use the
<a href="https://github.com/bazelbuild/bazel-skylib">Skylib</a> macro
<a href="https://github.com/bazelbuild/bazel-skylib/blob/main/docs/selects_doc.md#selectsconfig_setting_group">config_setting_group</a>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">config_setting(
</span></span><span class="line"><span class="cl">    name = &#34;config1&#34;,
</span></span><span class="line"><span class="cl">    values = {&#34;cpu&#34;: &#34;arm&#34;},
</span></span><span class="line"><span class="cl">)
</span></span><span class="line"><span class="cl">config_setting(
</span></span><span class="line"><span class="cl">    name = &#34;config2&#34;,
</span></span><span class="line"><span class="cl">    values = {&#34;compilation_mode&#34;: &#34;dbg&#34;},
</span></span><span class="line"><span class="cl">)
</span></span><span class="line"><span class="cl">selects.config_setting_group(
</span></span><span class="line"><span class="cl">    name = &#34;config1_and_2&#34;,
</span></span><span class="line"><span class="cl">    match_all = [&#34;:config1&#34;, &#34;:config2&#34;],
</span></span><span class="line"><span class="cl">)
</span></span><span class="line"><span class="cl">sh_binary(
</span></span><span class="line"><span class="cl">    name = &#34;my_target&#34;,
</span></span><span class="line"><span class="cl">    srcs = [&#34;always_include.sh&#34;],
</span></span><span class="line"><span class="cl">    deps = select({
</span></span><span class="line"><span class="cl">        &#34;:config1_and_2&#34;: [&#34;:standard_lib&#34;],
</span></span><span class="line"><span class="cl">        &#34;//conditions:default&#34;: [&#34;:other_lib&#34;],
</span></span><span class="line"><span class="cl">    }),
</span></span><span class="line"><span class="cl">)
</span></span></code></pre></div><p>Unlike OR chaining, existing <code>config_setting</code>s can&rsquo;t be directly <code>AND</code>ed
inside a <code>select</code>. You have to explicitly wrap them in a <code>config_setting_group</code>.</p>
<h2 id="custom-error-messages">Custom error messages</h2>
<p>By default, when no condition matches, the target the <code>select()</code> is attached to
fails with the error:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">ERROR: Configurable attribute &#34;deps&#34; doesn&#39;t match this configuration (would
</span></span><span class="line"><span class="cl">a default condition help?).
</span></span><span class="line"><span class="cl">Conditions checked:
</span></span><span class="line"><span class="cl">  //tools/cc_target_os:darwin
</span></span><span class="line"><span class="cl">  //tools/cc_target_os:android
</span></span></code></pre></div><p>This can be customized with the <a href="/reference/be/functions#select/"><code>no_match_error</code></a>
attribute:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">cc_library</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;my_lib&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">deps</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;//tools/cc_target_os:android&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;:android_deps&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;//tools/cc_target_os:windows&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;:windows_deps&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="n">no_match_error</span> <span class="o">=</span> <span class="s2">&#34;Please build with an Android or Windows toolchain&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">),</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ bazel build //myapp:my_lib
</span></span><span class="line"><span class="cl">ERROR: Configurable attribute <span class="s2">&#34;deps&#34;</span> doesn<span class="err">&#39;</span>t match this configuration: Please
</span></span><span class="line"><span class="cl">build with an Android or Windows toolchain
</span></span></code></pre></div><h2 id="rules-compatibility">Rules compatibility</h2>
<p>Rule implementations receive the <em>resolved values</em> of configurable
attributes. For example, given:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl"># myapp/BUILD
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">some_rule(
</span></span><span class="line"><span class="cl">    name = &#34;my_target&#34;,
</span></span><span class="line"><span class="cl">    some_attr = select({
</span></span><span class="line"><span class="cl">        &#34;:foo_mode&#34;: [&#34;:foo&#34;],
</span></span><span class="line"><span class="cl">        &#34;:bar_mode&#34;: [&#34;:bar&#34;],
</span></span><span class="line"><span class="cl">    }),
</span></span><span class="line"><span class="cl">)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ bazel build //myapp/my_target --define <span class="nv">mode</span><span class="o">=</span>foo
</span></span></code></pre></div><p>Rule implementation code sees <code>ctx.attr.some_attr</code> as <code>[&quot;:foo&quot;]</code>.</p>
<p>Macros can accept <code>select()</code> clauses and pass them through to native
rules. But <em>they cannot directly manipulate them</em>. For example, there&rsquo;s no way
for a macro to convert</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">select({&#34;foo&#34;: &#34;val&#34;}, ...)
</span></span></code></pre></div><p>to</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">select({&#34;foo&#34;: &#34;val_with_suffix&#34;}, ...)
</span></span></code></pre></div><p>This is for two reasons.</p>
<p>First, macros that need to know which path a <code>select</code> will choose <em>cannot work</em>
because macros are evaluated in Bazel&rsquo;s <a href="/run/build#loading/">loading phase</a>,
which occurs before flag values are known.
This is a core Bazel design restriction that&rsquo;s unlikely to change any time soon.</p>
<p>Second, macros that just need to iterate over <em>all</em> <code>select</code> paths, while
technically feasible, lack a coherent UI. Further design is necessary to change
this.</p>
<h2 id="bazel-query-and-cquery">Bazel query and cquery</h2>
<p>Bazel <a href="/query/guide/"><code>query</code></a> operates over Bazel&rsquo;s
<a href="/reference/glossary#loading-phase/">loading phase</a>.
This means it doesn&rsquo;t know what command line flags a target uses since those
flags aren&rsquo;t evaluated until later in the build (in the
<a href="/reference/glossary#analysis-phase/">analysis phase</a>).
So it can&rsquo;t determine which <code>select()</code> branches are chosen.</p>
<p>Bazel <a href="/query/cquery/"><code>cquery</code></a> operates after Bazel&rsquo;s analysis phase, so it has
all this information and can accurately resolve <code>select()</code>s.</p>
<p>Consider:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="nb">load</span><span class="p">(</span><span class="s2">&#34;@bazel_skylib//rules:common_settings.bzl&#34;</span><span class="p">,</span> <span class="s2">&#34;string_flag&#34;</span><span class="p">)</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># myapp/BUILD
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">string_flag(
</span></span><span class="line"><span class="cl">    name = &#34;dog_type&#34;,
</span></span><span class="line"><span class="cl">    build_setting_default = &#34;cat&#34;
</span></span><span class="line"><span class="cl">)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cc_library(
</span></span><span class="line"><span class="cl">    name = &#34;my_lib&#34;,
</span></span><span class="line"><span class="cl">    deps = select({
</span></span><span class="line"><span class="cl">        &#34;:long&#34;: [&#34;:foo_dep&#34;],
</span></span><span class="line"><span class="cl">        &#34;:short&#34;: [&#34;:bar_dep&#34;],
</span></span><span class="line"><span class="cl">    }),
</span></span><span class="line"><span class="cl">)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">config_setting(
</span></span><span class="line"><span class="cl">    name = &#34;long&#34;,
</span></span><span class="line"><span class="cl">    flag_values = {&#34;:dog_type&#34;: &#34;dachshund&#34;},
</span></span><span class="line"><span class="cl">)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">config_setting(
</span></span><span class="line"><span class="cl">    name = &#34;short&#34;,
</span></span><span class="line"><span class="cl">    flag_values = {&#34;:dog_type&#34;: &#34;pug&#34;},
</span></span><span class="line"><span class="cl">)
</span></span></code></pre></div><p><code>query</code> overapproximates <code>:my_lib</code>&rsquo;s dependencies:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ bazel query <span class="s1">&#39;deps(//myapp:my_lib)&#39;</span>
</span></span><span class="line"><span class="cl">//myapp:my_lib
</span></span><span class="line"><span class="cl">//myapp:foo_dep
</span></span><span class="line"><span class="cl">//myapp:bar_dep
</span></span></code></pre></div><p>while <code>cquery</code> shows its exact dependencies:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ bazel cquery <span class="s1">&#39;deps(//myapp:my_lib)&#39;</span> --//myapp:dog_type<span class="o">=</span>pug
</span></span><span class="line"><span class="cl">//myapp:my_lib
</span></span><span class="line"><span class="cl">//myapp:bar_dep
</span></span></code></pre></div><h2 id="faq">FAQ</h2>
<h3 id="why-doesnt-select-work-in-macros">Why doesn&rsquo;t select() work in macros?</h3>
<p>select() <em>does</em> work in rules! See <a href="#rules-compatibility">Rules compatibility</a> for
details.</p>
<p>The key issue this question usually means is that select() doesn&rsquo;t work in
<em>macros</em>. These are different than <em>rules</em>. See the
documentation on <a href="/extending/rules/">rules</a> and <a href="/extending/macros/">macros</a>
to understand the difference.
Here&rsquo;s an end-to-end example:</p>
<p>Define a rule and macro:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># myapp/defs.bzl</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Rule implementation: when an attribute is read, all select()s have already</span>
</span></span><span class="line"><span class="cl"><span class="c1"># been resolved. So it looks like a plain old attribute just like any other.</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">_impl</span><span class="p">(</span><span class="n">ctx</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">name</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">attr</span><span class="o">.</span><span class="n">name</span>
</span></span><span class="line"><span class="cl">    <span class="n">allcaps</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">attr</span><span class="o">.</span><span class="n">my_config_string</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>  <span class="c1"># This works fine on all values.</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;My name is &#34;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s2">&#34; with custom message: &#34;</span> <span class="o">+</span> <span class="n">allcaps</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Rule declaration:</span>
</span></span><span class="line"><span class="cl"><span class="n">my_custom_bazel_rule</span> <span class="o">=</span> <span class="n">rule</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">implementation</span> <span class="o">=</span> <span class="n">_impl</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">attrs</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&#34;my_config_string&#34;</span><span class="p">:</span> <span class="n">attr</span><span class="o">.</span><span class="n">string</span><span class="p">()},</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Macro declaration:</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">my_custom_bazel_macro</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">my_config_string</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">allcaps</span> <span class="o">=</span> <span class="n">my_config_string</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>  <span class="c1"># This line won&#39;t work with select(s).</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;My name is &#34;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s2">&#34; with custom message: &#34;</span> <span class="o">+</span> <span class="n">allcaps</span><span class="p">)</span>
</span></span></code></pre></div><p>Instantiate the rule and macro:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="c1"># myapp/BUILD</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">load</span><span class="p">(</span><span class="s2">&#34;//myapp:defs.bzl&#34;</span><span class="p">,</span> <span class="s2">&#34;my_custom_bazel_rule&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">load</span><span class="p">(</span><span class="s2">&#34;//myapp:defs.bzl&#34;</span><span class="p">,</span> <span class="s2">&#34;my_custom_bazel_macro&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">my_custom_bazel_rule</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;happy_rule&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">my_config_string</span> <span class="o">=</span> <span class="n">select</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;//third_party/bazel_platforms/cpu:x86_32&#34;</span><span class="p">:</span> <span class="s2">&#34;first string&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;//third_party/bazel_platforms/cpu:ppc&#34;</span><span class="p">:</span> <span class="s2">&#34;second string&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}),</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">my_custom_bazel_macro</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;happy_macro&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">my_config_string</span> <span class="o">=</span> <span class="s2">&#34;fixed string&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">my_custom_bazel_macro</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;sad_macro&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">my_config_string</span> <span class="o">=</span> <span class="n">select</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;//third_party/bazel_platforms/cpu:x86_32&#34;</span><span class="p">:</span> <span class="s2">&#34;first string&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;//third_party/bazel_platforms/cpu:ppc&#34;</span><span class="p">:</span> <span class="s2">&#34;other string&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}),</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></div><p>Building fails because <code>sad_macro</code> can&rsquo;t process the <code>select()</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">$ bazel build //myapp:all
</span></span><span class="line"><span class="cl">ERROR: /myworkspace/myapp/BUILD:17:1: Traceback
</span></span><span class="line"><span class="cl">  (most recent call last):
</span></span><span class="line"><span class="cl">File &#34;/myworkspace/myapp/BUILD&#34;, line 17
</span></span><span class="line"><span class="cl">my_custom_bazel_macro(name = &#34;sad_macro&#34;, my_config_stri...&#34;}))
</span></span><span class="line"><span class="cl">File &#34;/myworkspace/myapp/defs.bzl&#34;, line 4, in
</span></span><span class="line"><span class="cl">  my_custom_bazel_macro
</span></span><span class="line"><span class="cl">my_config_string.upper()
</span></span><span class="line"><span class="cl">type &#39;select&#39; has no method upper().
</span></span><span class="line"><span class="cl">ERROR: error loading package &#39;myapp&#39;: Package &#39;myapp&#39; contains errors.
</span></span></code></pre></div><p>Building succeeds when you comment out <code>sad_macro</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Comment out sad_macro so it doesn&#39;t mess up the build.</span>
</span></span><span class="line"><span class="cl">$ bazel build //myapp:all
</span></span><span class="line"><span class="cl">DEBUG: /myworkspace/myapp/defs.bzl:5:3: My name is happy_macro with custom message: FIXED STRING.
</span></span><span class="line"><span class="cl">DEBUG: /myworkspace/myapp/hi.bzl:15:3: My name is happy_rule with custom message: FIRST STRING.
</span></span></code></pre></div><p>This is impossible to change because <em>by definition</em> macros are evaluated before
Bazel reads the build&rsquo;s command line flags. That means there isn&rsquo;t enough
information to evaluate select()s.</p>
<p>Macros can, however, pass <code>select()</code>s as opaque blobs to rules:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># myapp/defs.bzl</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">my_custom_bazel_macro</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">my_config_string</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Invoking macro &#34;</span> <span class="o">+</span> <span class="n">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">my_custom_bazel_rule</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">name</span> <span class="o">=</span> <span class="n">name</span> <span class="o">+</span> <span class="s2">&#34;_as_target&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">my_config_string</span> <span class="o">=</span> <span class="n">my_config_string</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ bazel build //myapp:sad_macro_less_sad
</span></span><span class="line"><span class="cl">DEBUG: /myworkspace/myapp/defs.bzl:23:3: Invoking macro sad_macro_less_sad.
</span></span><span class="line"><span class="cl">DEBUG: /myworkspace/myapp/defs.bzl:15:3: My name is sad_macro_less_sad with custom message: FIRST STRING.
</span></span></code></pre></div><h3 id="why-does-select-always-return-true">Why does select() always return true?</h3>
<p>Because <em>macros</em> (but not rules) by definition
<a href="#faq-select-macro">can&rsquo;t evaluate <code>select()</code>s</a>, any attempt to do so
usually produces an error:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">ERROR: /myworkspace/myapp/BUILD:17:1: Traceback
</span></span><span class="line"><span class="cl">  (most recent call last):
</span></span><span class="line"><span class="cl">File &#34;/myworkspace/myapp/BUILD&#34;, line 17
</span></span><span class="line"><span class="cl">my_custom_bazel_macro(name = &#34;sad_macro&#34;, my_config_stri...&#34;}))
</span></span><span class="line"><span class="cl">File &#34;/myworkspace/myapp/defs.bzl&#34;, line 4, in
</span></span><span class="line"><span class="cl">  my_custom_bazel_macro
</span></span><span class="line"><span class="cl">my_config_string.upper()
</span></span><span class="line"><span class="cl">type &#39;select&#39; has no method upper().
</span></span></code></pre></div><p>Booleans are a special case that fail silently, so you should be particularly
vigilant with them:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="o">$</span> <span class="n">cat</span> <span class="n">myapp</span><span class="o">/</span><span class="n">defs</span><span class="o">.</span><span class="n">bzl</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">my_boolean_macro</span><span class="p">(</span><span class="n">boolval</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">  <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;TRUE&#34;</span> <span class="k">if</span> <span class="n">boolval</span> <span class="k">else</span> <span class="s2">&#34;FALSE&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">$</span> <span class="n">cat</span> <span class="n">myapp</span><span class="o">/</span><span class="n">BUILD</span>
</span></span><span class="line"><span class="cl"><span class="nb">load</span><span class="p">(</span><span class="s2">&#34;//myapp:defs.bzl&#34;</span><span class="p">,</span> <span class="s2">&#34;my_boolean_macro&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">my_boolean_macro</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">boolval</span> <span class="o">=</span> <span class="n">select</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;//third_party/bazel_platforms/cpu:x86_32&#34;</span><span class="p">:</span> <span class="n">True</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;//third_party/bazel_platforms/cpu:ppc&#34;</span><span class="p">:</span> <span class="n">False</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}),</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">$</span> <span class="n">bazel</span> <span class="n">build</span> <span class="o">//</span><span class="n">myapp</span><span class="p">:</span><span class="n">all</span> <span class="o">--</span><span class="n">cpu</span><span class="o">=</span><span class="n">x86</span>
</span></span><span class="line"><span class="cl"><span class="n">DEBUG</span><span class="p">:</span> <span class="o">/</span><span class="n">myworkspace</span><span class="o">/</span><span class="n">myapp</span><span class="o">/</span><span class="n">defs</span><span class="o">.</span><span class="n">bzl</span><span class="p">:</span><span class="mi">4</span><span class="p">:</span><span class="mi">3</span><span class="p">:</span> <span class="n">TRUE</span><span class="o">.</span>
</span></span><span class="line"><span class="cl"><span class="o">$</span> <span class="n">bazel</span> <span class="n">build</span> <span class="o">//</span><span class="n">mypro</span><span class="p">:</span><span class="n">all</span> <span class="o">--</span><span class="n">cpu</span><span class="o">=</span><span class="n">ppc</span>
</span></span><span class="line"><span class="cl"><span class="n">DEBUG</span><span class="p">:</span> <span class="o">/</span><span class="n">myworkspace</span><span class="o">/</span><span class="n">myapp</span><span class="o">/</span><span class="n">defs</span><span class="o">.</span><span class="n">bzl</span><span class="p">:</span><span class="mi">4</span><span class="p">:</span><span class="mi">3</span><span class="p">:</span> <span class="n">TRUE</span><span class="o">.</span>
</span></span></code></pre></div><p>This happens because macros don&rsquo;t understand the contents of <code>select()</code>.
So what they&rsquo;re really evaluting is the <code>select()</code> object itself. According to
<a href="https://docs.python.org/release/2.5.2/lib/truth.html">Pythonic</a> design
standards, all objects aside from a very small number of exceptions
automatically return true.</p>
<h3 id="can-i-read-select-like-a-dict">Can I read select() like a dict?</h3>
<p>Macros <a href="#faq-select-macro">can&rsquo;t</a> evaluate select(s) because macros evaluate before
Bazel knows what the build&rsquo;s command line parameters are. Can they at least read
the <code>select()</code>&rsquo;s dictionary to, for example, add a suffix to each value?</p>
<p>Conceptually this is possible, but <a href="https://github.com/bazelbuild/bazel/issues/8419">it isn&rsquo;t yet a Bazel feature</a>.
What you <em>can</em> do today is prepare a straight dictionary, then feed it into a
<code>select()</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">$ cat myapp/defs.bzl
</span></span><span class="line"><span class="cl">def selecty_genrule(name, select_cmd):
</span></span><span class="line"><span class="cl">  for key in select_cmd.keys():
</span></span><span class="line"><span class="cl">    select_cmd[key] += &#34; WITH SUFFIX&#34;
</span></span><span class="line"><span class="cl">  native.genrule(
</span></span><span class="line"><span class="cl">      name = name,
</span></span><span class="line"><span class="cl">      outs = [name + &#34;.out&#34;],
</span></span><span class="line"><span class="cl">      srcs = [],
</span></span><span class="line"><span class="cl">      cmd = &#34;echo &#34; + select(select_cmd + {&#34;//conditions:default&#34;: &#34;default&#34;})
</span></span><span class="line"><span class="cl">        + &#34; &gt; $@&#34;
</span></span><span class="line"><span class="cl">  )
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ cat myapp/BUILD
</span></span><span class="line"><span class="cl">selecty_genrule(
</span></span><span class="line"><span class="cl">    name = &#34;selecty&#34;,
</span></span><span class="line"><span class="cl">    select_cmd = {
</span></span><span class="line"><span class="cl">        &#34;//third_party/bazel_platforms/cpu:x86_32&#34;: &#34;x86 mode&#34;,
</span></span><span class="line"><span class="cl">    },
</span></span><span class="line"><span class="cl">)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ bazel build //testapp:selecty --cpu=x86 &amp;&amp; cat bazel-genfiles/testapp/selecty.out
</span></span><span class="line"><span class="cl">x86 mode WITH SUFFIX
</span></span></code></pre></div><p>If you&rsquo;d like to support both <code>select()</code> and native types, you can do this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="err">$</span> <span class="n">cat</span> <span class="n">myapp</span><span class="o">/</span><span class="n">defs</span><span class="o">.</span><span class="n">bzl</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">selecty_genrule</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">select_cmd</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">cmd_suffix</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">select_cmd</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&#34;string&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">cmd_suffix</span> <span class="o">=</span> <span class="n">select_cmd</span> <span class="o">+</span> <span class="s2">&#34; WITH SUFFIX&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">select_cmd</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&#34;dict&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">select_cmd</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">            <span class="n">select_cmd</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">+=</span> <span class="s2">&#34; WITH SUFFIX&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">cmd_suffix</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">select_cmd</span> <span class="o">+</span> <span class="p">{</span><span class="s2">&#34;//conditions:default&#34;</span><span class="p">:</span> <span class="s2">&#34;default&#34;</span><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">native</span><span class="o">.</span><span class="n">genrule</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">outs</span> <span class="o">=</span> <span class="p">[</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&#34;.out&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="n">srcs</span> <span class="o">=</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl">        <span class="n">cmd</span> <span class="o">=</span> <span class="s2">&#34;echo &#34;</span> <span class="o">+</span> <span class="n">cmd_suffix</span> <span class="o">+</span> <span class="s2">&#34;&gt; $@&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span></code></pre></div><h3 id="why-doesnt-select-work-with-bind">Why doesn&rsquo;t select() work with bind()?</h3>
<p>First of all, do not use <code>bind()</code>. It is deprecated in favor of <code>alias()</code>.</p>
<p>The technical answer is that <a href="/reference/be/workspace#bind/"><code>bind()</code></a> is a repo
rule, not a BUILD rule.</p>
<p>Repo rules do not have a specific configuration, and aren&rsquo;t evaluated in
the same way as BUILD rules. Therefore, a <code>select()</code> in a <code>bind()</code> can&rsquo;t
actually evaluate to any specific branch.</p>
<p>Instead, you should use <a href="/reference/be/general#alias/"><code>alias()</code></a>, with a <code>select()</code> in
the <code>actual</code> attribute, to perform this type of run-time determination. This
works correctly, since <code>alias()</code> is a BUILD rule, and is evaluated with a
specific configuration.</p>
<p>You can even have a <code>bind()</code> target point to an <code>alias()</code>, if needed.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">$ cat WORKSPACE
</span></span><span class="line"><span class="cl">workspace(name = &#34;myapp&#34;)
</span></span><span class="line"><span class="cl">bind(name = &#34;openssl&#34;, actual = &#34;//:ssl&#34;)
</span></span><span class="line"><span class="cl">http_archive(name = &#34;alternative&#34;, ...)
</span></span><span class="line"><span class="cl">http_archive(name = &#34;boringssl&#34;, ...)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ cat BUILD
</span></span><span class="line"><span class="cl">config_setting(
</span></span><span class="line"><span class="cl">    name = &#34;alt_ssl&#34;,
</span></span><span class="line"><span class="cl">    define_values = {
</span></span><span class="line"><span class="cl">        &#34;ssl_library&#34;: &#34;alternative&#34;,
</span></span><span class="line"><span class="cl">    },
</span></span><span class="line"><span class="cl">)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">alias(
</span></span><span class="line"><span class="cl">    name = &#34;ssl&#34;,
</span></span><span class="line"><span class="cl">    actual = select({
</span></span><span class="line"><span class="cl">        &#34;//:alt_ssl&#34;: &#34;@alternative//:ssl&#34;,
</span></span><span class="line"><span class="cl">        &#34;//conditions:default&#34;: &#34;@boringssl//:ssl&#34;,
</span></span><span class="line"><span class="cl">    }),
</span></span><span class="line"><span class="cl">)
</span></span></code></pre></div><p>With this setup, you can pass <code>--define ssl_library=alternative</code>, and any target
that depends on either <code>//:ssl</code> or <code>//external:ssl</code> will see the alternative
located at <code>@alternative//:ssl</code>.</p>
<p>But really, stop using <code>bind()</code>.</p>
<h3 id="why-doesnt-my-select-choose-what-i-expect">Why doesn&rsquo;t my select() choose what I expect?</h3>
<p>If <code>//myapp:foo</code> has a <code>select()</code> that doesn&rsquo;t choose the condition you expect,
use <a href="/query/cquery/">cquery</a> and <code>bazel config</code> to debug:</p>
<p>If <code>//myapp:foo</code> is the top-level target you&rsquo;re building, run:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ bazel cquery //myapp:foo &lt;desired build flags&gt;
</span></span><span class="line"><span class="cl">//myapp:foo <span class="o">(</span>12e23b9a2b534a<span class="o">)</span>
</span></span></code></pre></div><p>If you&rsquo;re building some other target <code>//bar</code> that depends on
//myapp:foo somewhere in its subgraph, run:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ bazel cquery <span class="s1">&#39;somepath(//bar, //myapp:foo)&#39;</span> &lt;desired build flags&gt;
</span></span><span class="line"><span class="cl">//bar:bar   <span class="o">(</span>3ag3193fee94a2<span class="o">)</span>
</span></span><span class="line"><span class="cl">//bar:intermediate_dep <span class="o">(</span>12e23b9a2b534a<span class="o">)</span>
</span></span><span class="line"><span class="cl">//myapp:foo <span class="o">(</span>12e23b9a2b534a<span class="o">)</span>
</span></span></code></pre></div><p>The <code>(12e23b9a2b534a)</code> next to <code>//myapp:foo</code> is a <em>hash</em> of the
configuration that resolves <code>//myapp:foo</code>&rsquo;s <code>select()</code>. You can inspect its
values with <code>bazel config</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ bazel config 12e23b9a2b534a
</span></span><span class="line"><span class="cl">BuildConfigurationValue 12e23b9a2b534a
</span></span><span class="line"><span class="cl">Fragment com.google.devtools.build.lib.analysis.config.CoreOptions <span class="o">{</span>
</span></span><span class="line"><span class="cl">  cpu: darwin
</span></span><span class="line"><span class="cl">  compilation_mode: fastbuild
</span></span><span class="line"><span class="cl">  ...
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">Fragment com.google.devtools.build.lib.rules.cpp.CppOptions <span class="o">{</span>
</span></span><span class="line"><span class="cl">  linkopt: <span class="o">[</span>-Dfoo<span class="o">=</span>bar<span class="o">]</span>
</span></span><span class="line"><span class="cl">  ...
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">...
</span></span></code></pre></div><p>Then compare this output against the settings expected by each <code>config_setting</code>.</p>
<p><code>//myapp:foo</code> may exist in different configurations in the same build. See the
<a href="/query/cquery/">cquery docs</a> for guidance on using <code>somepath</code> to get the right
one.</p>
<p>Caution: To prevent restarting the Bazel server, invoke <code>bazel config</code> with the
same command line flags as the <code>bazel cquery</code>. The <code>config</code> command relies on
the configuration nodes from the still-running server of the previous command.</p>
<h3 id="why-doesnt-select-work-with-platforms">Why doesn&rsquo;t <code>select()</code> work with platforms?</h3>
<p>Bazel doesn&rsquo;t support configurable attributes checking whether a given platform
is the target platform because the semantics are unclear.</p>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">platform</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;x86_linux_platform&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">constraint_values</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;@platforms//cpu:x86&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;@platforms//os:linux&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">cc_library</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;lib&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">srcs</span> <span class="o">=</span> <span class="p">[</span><span class="o">...</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="n">linkopts</span> <span class="o">=</span> <span class="n">select</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;:x86_linux_platform&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;--enable_x86_optimizations&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;//conditions:default&#34;</span><span class="p">:</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl">    <span class="p">}),</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></div><p>In this <code>BUILD</code> file, which <code>select()</code> should be used if the target platform has both the
<code>@platforms//cpu:x86</code> and <code>@platforms//os:linux</code> constraints, but is <strong>not</strong> the
<code>:x86_linux_platform</code> defined here? The author of the <code>BUILD</code> file and the user
who defined the separate platform may have different ideas.</p>
<h4 id="what-should-i-do-instead">What should I do instead?</h4>
<p>Instead, define a <code>config_setting</code> that matches <strong>any</strong> platform with
these constraints:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">config_setting</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;is_x86_linux&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">constraint_values</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;@platforms//cpu:x86&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;@platforms//os:linux&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">cc_library</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;lib&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">srcs</span> <span class="o">=</span> <span class="p">[</span><span class="o">...</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="n">linkopts</span> <span class="o">=</span> <span class="n">select</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;:is_x86_linux&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;--enable_x86_optimizations&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;//conditions:default&#34;</span><span class="p">:</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl">    <span class="p">}),</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></div><p>This process defines specific semantics, making it clearer to users what
platforms meet the desired conditions.</p>
<h4 id="what-if-i-really-really-want-to-select-on-the-platform">What if I really, really want to <code>select</code> on the platform?</h4>
<p>If your build requirements specifically require checking the platform, you
can flip the value of the <code>--platforms</code> flag in a <code>config_setting</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">config_setting(
</span></span><span class="line"><span class="cl">    name = &#34;is_specific_x86_linux_platform&#34;,
</span></span><span class="line"><span class="cl">    values = {
</span></span><span class="line"><span class="cl">        &#34;platforms&#34;: [&#34;//package:x86_linux_platform&#34;],
</span></span><span class="line"><span class="cl">    },
</span></span><span class="line"><span class="cl">)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cc_library(
</span></span><span class="line"><span class="cl">    name = &#34;lib&#34;,
</span></span><span class="line"><span class="cl">    srcs = [...],
</span></span><span class="line"><span class="cl">    linkopts = select({
</span></span><span class="line"><span class="cl">        &#34;:is_specific_x86_linux_platform&#34;: [&#34;--enable_x86_optimizations&#34;],
</span></span><span class="line"><span class="cl">        &#34;//conditions:default&#34;: [],
</span></span><span class="line"><span class="cl">    }),
</span></span><span class="line"><span class="cl">)
</span></span></code></pre></div><p>The Bazel team doesn&rsquo;t endorse doing this; it overly constrains your build and
confuses users when the expected condition does not match.</p>

	
</div>


          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        
      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        
      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        
      </div>
    </div>
  </div>
</footer>

    </div>
    <script src="/js/main.js"></script>
<script defer src="/js/click-to-copy.js" crossorigin="anonymous"></script>
<script src='/js/tabpane-persist.js'></script>

  </body>
</html>